// <auto-generated />
using System;
using FormReporting.Data;
using Microsoft.EntityFrameworkCore;
using Microsoft.EntityFrameworkCore.Infrastructure;
using Microsoft.EntityFrameworkCore.Metadata;
using Microsoft.EntityFrameworkCore.Migrations;
using Microsoft.EntityFrameworkCore.Storage.ValueConversion;

#nullable disable

namespace FormReporting.Data.Migrations
{
    [DbContext(typeof(ApplicationDbContext))]
    [Migration("20260105211026_AddMetriccategoriesAndUnits")]
    partial class AddMetriccategoriesAndUnits
    {
        /// <inheritdoc />
        protected override void BuildTargetModel(ModelBuilder modelBuilder)
        {
#pragma warning disable 612, 618
            modelBuilder
                .HasAnnotation("ProductVersion", "9.0.10")
                .HasAnnotation("Relational:MaxIdentifierLength", 128);

            SqlServerModelBuilderExtensions.UseIdentityColumns(modelBuilder);

            modelBuilder.Entity("FormItemOptionTemplateFormItemOptionTemplateCategory", b =>
                {
                    b.Property<int>("FormItemOptionTemplateCategoryCategoryId")
                        .HasColumnType("int");

                    b.Property<int>("TemplatesTemplateId")
                        .HasColumnType("int");

                    b.HasKey("FormItemOptionTemplateCategoryCategoryId", "TemplatesTemplateId");

                    b.HasIndex("TemplatesTemplateId");

                    b.ToTable("FormItemOptionTemplateCategoryMappings", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Audit.AuditLog", b =>
                {
                    b.Property<long>("AuditId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("AuditId"));

                    b.Property<string>("Action")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<int?>("ChangedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("ChangedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("IPAddress")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("NewValues")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("OldValues")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("RecordId")
                        .HasColumnType("int");

                    b.Property<string>("TableName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("UserAgent")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.HasKey("AuditId");

                    b.HasIndex("ChangedDate")
                        .IsDescending()
                        .HasDatabaseName("IX_AuditLogs_Date");

                    b.HasIndex("ChangedBy", "ChangedDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_AuditLogs_User");

                    b.HasIndex("TableName", "RecordId", "ChangedDate")
                        .IsDescending(false, false, true)
                        .HasDatabaseName("IX_AuditLogs_Table");

                    b.ToTable("AuditLogs");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Audit.UserActivityLog", b =>
                {
                    b.Property<long>("ActivityId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("ActivityId"));

                    b.Property<DateTime>("ActivityDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("ActivityType")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("DeviceInfo")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int?>("EntityId")
                        .HasColumnType("int");

                    b.Property<string>("EntityType")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("IPAddress")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<int>("UserId")
                        .HasColumnType("int");

                    b.HasKey("ActivityId");

                    b.HasIndex("ActivityDate")
                        .IsDescending()
                        .HasDatabaseName("IX_Activity_Date");

                    b.HasIndex("UserId", "ActivityDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_Activity_User");

                    b.ToTable("UserActivityLog");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Financial.BudgetCategory", b =>
                {
                    b.Property<int>("CategoryId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("CategoryId"));

                    b.Property<string>("CategoryCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("CategoryName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsCapital")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<int?>("ParentCategoryId")
                        .HasColumnType("int");

                    b.HasKey("CategoryId");

                    b.HasIndex("CategoryCode")
                        .IsUnique();

                    b.HasIndex("ParentCategoryId");

                    b.ToTable("BudgetCategories");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Financial.TenantBudget", b =>
                {
                    b.Property<int>("BudgetId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("BudgetId"));

                    b.Property<int?>("ApprovedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("ApprovedDate")
                        .HasColumnType("date");

                    b.Property<decimal>("BudgetedAmount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int>("CategoryId")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<int>("FiscalYear")
                        .HasColumnType("int");

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("Notes")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("TenantId")
                        .HasColumnType("int");

                    b.HasKey("BudgetId");

                    b.HasIndex("CategoryId");

                    b.HasIndex("TenantId", "FiscalYear", "CategoryId")
                        .IsUnique()
                        .HasDatabaseName("UQ_TenantBudget");

                    b.ToTable("TenantBudgets");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Financial.TenantExpense", b =>
                {
                    b.Property<int>("ExpenseId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("ExpenseId"));

                    b.Property<decimal>("Amount")
                        .HasColumnType("decimal(18,2)");

                    b.Property<int?>("ApprovedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("ApprovedDate")
                        .HasColumnType("date");

                    b.Property<string>("AttachmentPath")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("CategoryId")
                        .HasColumnType("int");

                    b.Property<int>("CreatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<DateTime>("ExpenseDate")
                        .HasColumnType("date");

                    b.Property<string>("ExpenseType")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)")
                        .HasDefaultValue("Purchase");

                    b.Property<bool>("IsCapital")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("ReferenceNumber")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<int>("TenantId")
                        .HasColumnType("int");

                    b.Property<string>("VendorName")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.HasKey("ExpenseId");

                    b.HasIndex("CategoryId");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("ExpenseDate", "TenantId")
                        .HasDatabaseName("IX_Expenses_Date");

                    b.HasIndex("ExpenseType", "IsCapital")
                        .HasDatabaseName("IX_Expenses_Type");

                    b.HasIndex("TenantId", "ExpenseDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_Expenses_Tenant");

                    b.ToTable("TenantExpenses", t =>
                        {
                            t.HasCheckConstraint("CK_Expense_Type", "ExpenseType IN ('Purchase', 'Subscription', 'Maintenance', 'Service', 'Internal', 'Utility', 'Other')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FieldLibrary", b =>
                {
                    b.Property<int>("LibraryFieldId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("LibraryFieldId"));

                    b.Property<string>("Category")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int>("CreatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("DefaultConfiguration")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<string>("FieldCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("FieldName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("FieldType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.HasKey("LibraryFieldId");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("FieldCode")
                        .IsUnique()
                        .HasDatabaseName("IX_FieldLibrary_Code");

                    b.HasIndex("Category", "IsActive")
                        .HasDatabaseName("IX_FieldLibrary_Category");

                    b.HasIndex("FieldType", "IsActive")
                        .HasDatabaseName("IX_FieldLibrary_Type");

                    b.ToTable("FieldLibrary");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormAnalytics", b =>
                {
                    b.Property<long>("AnalyticId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("AnalyticId"));

                    b.Property<string>("EventData")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("EventDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("EventType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("SessionId")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int?>("SubmissionId")
                        .HasColumnType("int");

                    b.Property<int>("TemplateId")
                        .HasColumnType("int");

                    b.Property<int>("UserId")
                        .HasColumnType("int");

                    b.HasKey("AnalyticId");

                    b.HasIndex("SubmissionId")
                        .HasDatabaseName("IX_Analytics_Submission");

                    b.HasIndex("EventType", "EventDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_Analytics_EventType");

                    b.HasIndex("SessionId", "EventDate")
                        .HasDatabaseName("IX_Analytics_Session");

                    b.HasIndex("TemplateId", "EventDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_Analytics_Template_Date");

                    b.HasIndex("UserId", "EventDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_Analytics_User_Date");

                    b.ToTable("FormAnalytics", t =>
                        {
                            t.HasCheckConstraint("CK_Analytics_EventType", "EventType IN ('FormOpened', 'SectionStarted', 'SectionCompleted', 'FieldFilled', 'FormAbandoned', 'FormSubmitted', 'FormSaved')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormCategory", b =>
                {
                    b.Property<int>("CategoryId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("CategoryId"));

                    b.Property<string>("CategoryCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("CategoryName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("Color")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("DisplayOrder")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<string>("IconClass")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.HasKey("CategoryId");

                    b.HasIndex("CategoryCode")
                        .IsUnique();

                    b.HasIndex("CategoryName")
                        .IsUnique();

                    b.HasIndex("IsActive", "DisplayOrder")
                        .HasDatabaseName("IX_Categories_Active");

                    b.ToTable("FormCategories");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemCalculation", b =>
                {
                    b.Property<int>("CalculationId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("CalculationId"));

                    b.Property<string>("CalculationFormula")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int>("TargetItemId")
                        .HasColumnType("int");

                    b.HasKey("CalculationId");

                    b.HasIndex("TargetItemId", "IsActive")
                        .HasDatabaseName("IX_ItemCalculations_Target");

                    b.ToTable("FormItemCalculations");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemConfiguration", b =>
                {
                    b.Property<int>("ConfigId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("ConfigId"));

                    b.Property<string>("ConfigKey")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("ConfigValue")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("ItemId")
                        .HasColumnType("int");

                    b.HasKey("ConfigId");

                    b.HasIndex("ConfigKey")
                        .HasDatabaseName("IX_ItemConfig_Key");

                    b.HasIndex("ItemId")
                        .HasDatabaseName("IX_ItemConfig_Item");

                    b.HasIndex("ItemId", "ConfigKey")
                        .IsUnique()
                        .HasDatabaseName("UQ_ItemConfig");

                    b.ToTable("FormItemConfiguration");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemMetricMapping", b =>
                {
                    b.Property<int>("MappingId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MappingId"));

                    b.Property<string>("AggregationType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("ExpectedValue")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int>("ItemId")
                        .HasColumnType("int");

                    b.Property<string>("MappingName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("MappingType")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<int?>("MetricId")
                        .HasColumnType("int");

                    b.Property<string>("TransformationLogic")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("MappingId");

                    b.HasIndex("ItemId", "IsActive")
                        .HasDatabaseName("IX_ItemMetricMap_Item");

                    b.HasIndex("ItemId", "MetricId")
                        .IsUnique()
                        .HasDatabaseName("UQ_ItemMetricMap")
                        .HasFilter("[MetricId] IS NOT NULL");

                    b.HasIndex("MappingType", "IsActive")
                        .HasDatabaseName("IX_ItemMetricMap_Type");

                    b.HasIndex("MetricId", "IsActive")
                        .HasDatabaseName("IX_ItemMetricMap_Metric");

                    b.ToTable("FormItemMetricMappings");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemOption", b =>
                {
                    b.Property<int>("OptionId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("OptionId"));

                    b.Property<int>("DisplayOrder")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsDefault")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<int>("ItemId")
                        .HasColumnType("int");

                    b.Property<string>("OptionLabel")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("OptionValue")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<int?>("ParentOptionId")
                        .HasColumnType("int");

                    b.Property<decimal?>("ScoreValue")
                        .HasColumnType("decimal(10,2)");

                    b.Property<decimal?>("ScoreWeight")
                        .HasColumnType("decimal(10,2)");

                    b.HasKey("OptionId");

                    b.HasIndex("ParentOptionId")
                        .HasDatabaseName("IX_ItemOptions_Parent");

                    b.HasIndex("ItemId", "OptionValue")
                        .IsUnique()
                        .HasDatabaseName("UQ_ItemOption");

                    b.HasIndex("ItemId", "DisplayOrder", "IsActive")
                        .HasDatabaseName("IX_ItemOptions_Item");

                    b.ToTable("FormItemOptions");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemOptionTemplate", b =>
                {
                    b.Property<int>("TemplateId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("TemplateId"));

                    b.Property<string>("ApplicableFieldTypes")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("Category")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<int?>("CreatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("DisplayOrder")
                        .HasColumnType("int");

                    b.Property<bool>("HasScoring")
                        .HasColumnType("bit");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit");

                    b.Property<bool>("IsSystemTemplate")
                        .HasColumnType("bit");

                    b.Property<int?>("ModifiedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("ModifiedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("RecommendedFor")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("ScoringType")
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<string>("SubCategory")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("TemplateCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("TemplateName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int?>("TenantId")
                        .HasColumnType("int");

                    b.Property<int>("UsageCount")
                        .HasColumnType("int");

                    b.HasKey("TemplateId");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("DisplayOrder")
                        .HasDatabaseName("IX_FormItemOptionTemplates_DisplayOrder");

                    b.HasIndex("ModifiedBy");

                    b.HasIndex("TemplateCode")
                        .IsUnique()
                        .HasDatabaseName("IX_FormItemOptionTemplates_TemplateCode");

                    b.HasIndex("Category", "IsActive")
                        .HasDatabaseName("IX_FormItemOptionTemplates_Category_IsActive");

                    b.HasIndex("TenantId", "IsActive")
                        .HasDatabaseName("IX_FormItemOptionTemplates_Tenant_IsActive");

                    b.ToTable("FormItemOptionTemplates", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemOptionTemplateCategory", b =>
                {
                    b.Property<int>("CategoryId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("CategoryId"));

                    b.Property<string>("CategoryName")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("DisplayOrder")
                        .HasColumnType("int");

                    b.Property<string>("IconClass")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit");

                    b.HasKey("CategoryId");

                    b.HasIndex("CategoryName")
                        .IsUnique()
                        .HasDatabaseName("IX_FormItemOptionTemplateCategories_CategoryName");

                    b.HasIndex("DisplayOrder")
                        .HasDatabaseName("IX_FormItemOptionTemplateCategories_DisplayOrder");

                    b.ToTable("FormItemOptionTemplateCategories", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemOptionTemplateItem", b =>
                {
                    b.Property<int>("TemplateItemId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("TemplateItemId"));

                    b.Property<string>("ColorHint")
                        .HasMaxLength(7)
                        .HasColumnType("nvarchar(7)");

                    b.Property<int>("DisplayOrder")
                        .HasColumnType("int");

                    b.Property<string>("IconClass")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsDefault")
                        .HasColumnType("bit");

                    b.Property<string>("OptionLabel")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("OptionValue")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<decimal?>("ScoreValue")
                        .HasColumnType("decimal(10,2)");

                    b.Property<decimal?>("ScoreWeight")
                        .HasColumnType("decimal(10,2)");

                    b.Property<int>("TemplateId")
                        .HasColumnType("int");

                    b.HasKey("TemplateItemId");

                    b.HasIndex("TemplateId", "DisplayOrder")
                        .IsUnique()
                        .HasDatabaseName("IX_FormItemOptionTemplateItems_Template_Order");

                    b.ToTable("FormItemOptionTemplateItems", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemValidation", b =>
                {
                    b.Property<int>("ItemValidationId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("ItemValidationId"));

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("CustomExpression")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ErrorMessage")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int>("ItemId")
                        .HasColumnType("int");

                    b.Property<int?>("MaxLength")
                        .HasColumnType("int");

                    b.Property<decimal?>("MaxValue")
                        .HasColumnType("decimal(18,4)");

                    b.Property<int?>("MinLength")
                        .HasColumnType("int");

                    b.Property<decimal?>("MinValue")
                        .HasColumnType("decimal(18,4)");

                    b.Property<string>("RegexPattern")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("Severity")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)")
                        .HasDefaultValue("Error");

                    b.Property<int>("ValidationOrder")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<string>("ValidationType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.HasKey("ItemValidationId");

                    b.HasIndex("ValidationType", "IsActive")
                        .HasDatabaseName("IX_ItemValidations_Type");

                    b.HasIndex("ItemId", "ValidationOrder", "IsActive")
                        .HasDatabaseName("IX_ItemValidations_Item");

                    b.ToTable("FormItemValidations", t =>
                        {
                            t.HasCheckConstraint("CK_ValidationSeverity", "Severity IN ('Error', 'Warning', 'Info')");

                            t.HasCheckConstraint("CK_ValidationType", "ValidationType IN ('Required', 'Email', 'Phone', 'URL', 'Range', 'MinLength', 'MaxLength', 'Pattern', 'Custom', 'CrossField', 'Date', 'Number', 'Integer', 'Decimal')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormSectionMetricMapping", b =>
                {
                    b.Property<int>("MappingId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MappingId"));

                    b.Property<string>("AggregationType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<string>("MappingName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("MappingType")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<int?>("MetricId")
                        .HasColumnType("int");

                    b.Property<int>("SectionId")
                        .HasColumnType("int");

                    b.HasKey("MappingId");

                    b.HasIndex("MetricId");

                    b.HasIndex("SectionId");

                    b.HasIndex("SectionId", "MappingName")
                        .IsUnique();

                    b.ToTable("FormSectionMetricMappings");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormSectionMetricSource", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("DisplayOrder")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<int>("ItemMappingId")
                        .HasColumnType("int");

                    b.Property<int>("SectionMappingId")
                        .HasColumnType("int");

                    b.Property<decimal?>("Weight")
                        .HasColumnType("decimal(5,4)");

                    b.HasKey("Id");

                    b.HasIndex("ItemMappingId");

                    b.HasIndex("SectionMappingId");

                    b.HasIndex("SectionMappingId", "ItemMappingId")
                        .IsUnique();

                    b.ToTable("FormSectionMetricSources");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplate", b =>
                {
                    b.Property<int>("TemplateId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("TemplateId"));

                    b.Property<bool>("AllowAnonymousAccess")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<int?>("ArchivedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("ArchivedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("ArchivedReason")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("CategoryId")
                        .HasColumnType("int");

                    b.Property<int>("CreatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int?>("ModifiedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("PublishStatus")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)")
                        .HasDefaultValue("Draft");

                    b.Property<int?>("PublishedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("PublishedDate")
                        .HasColumnType("datetime2");

                    b.Property<bool>("RequiresApproval")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int>("SubmissionMode")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(1);

                    b.Property<string>("TemplateCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("TemplateName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("TemplateType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<int>("Version")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(1);

                    b.Property<int?>("WorkflowId")
                        .HasColumnType("int");

                    b.HasKey("TemplateId");

                    b.HasIndex("AllowAnonymousAccess")
                        .HasDatabaseName("IX_Templates_AnonymousAccess");

                    b.HasIndex("ArchivedBy");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("ModifiedBy");

                    b.HasIndex("PublishedBy");

                    b.HasIndex("SubmissionMode")
                        .HasDatabaseName("IX_Templates_SubmissionMode");

                    b.HasIndex("TemplateCode")
                        .IsUnique();

                    b.HasIndex("WorkflowId")
                        .HasDatabaseName("IX_Template_Workflow");

                    b.HasIndex("CategoryId", "IsActive")
                        .HasDatabaseName("IX_Templates_Category");

                    b.HasIndex("PublishStatus", "IsActive")
                        .HasDatabaseName("IX_Templates_PublishStatus");

                    b.ToTable("FormTemplates", t =>
                        {
                            t.HasCheckConstraint("CK_Template_Approval", "(RequiresApproval = 0 AND WorkflowId IS NULL) OR (RequiresApproval = 1 AND WorkflowId IS NOT NULL) OR (PublishStatus = 'Draft')");

                            t.HasCheckConstraint("CK_Template_PublishStatus", "PublishStatus IN ('Draft', 'Published', 'Archived', 'Deprecated')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateAssignment", b =>
                {
                    b.Property<int>("AssignmentId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("AssignmentId"));

                    b.Property<bool>("AllowAnonymous")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<int>("AssignedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("AssignedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("AssignmentType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("CancellationReason")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int?>("CancelledBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("CancelledDate")
                        .HasColumnType("datetime2");

                    b.Property<int?>("DepartmentId")
                        .HasColumnType("int");

                    b.Property<DateTime>("EffectiveFrom")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<DateTime?>("EffectiveUntil")
                        .HasColumnType("datetime2");

                    b.Property<string>("Notes")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int?>("RoleId")
                        .HasColumnType("int");

                    b.Property<string>("Status")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)")
                        .HasDefaultValue("Active");

                    b.Property<int>("TemplateId")
                        .HasColumnType("int");

                    b.Property<int?>("TenantGroupId")
                        .HasColumnType("int");

                    b.Property<int?>("TenantId")
                        .HasColumnType("int");

                    b.Property<string>("TenantType")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<int?>("UserGroupId")
                        .HasColumnType("int");

                    b.Property<int?>("UserId")
                        .HasColumnType("int");

                    b.HasKey("AssignmentId");

                    b.HasIndex("AllowAnonymous")
                        .HasDatabaseName("IX_TemplateAssignment_Anonymous")
                        .HasFilter("AllowAnonymous = 1");

                    b.HasIndex("AssignedBy");

                    b.HasIndex("CancelledBy");

                    b.HasIndex("DepartmentId");

                    b.HasIndex("RoleId")
                        .HasDatabaseName("IX_TemplateAssignment_Role");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_TemplateAssignment_Status");

                    b.HasIndex("UserGroupId");

                    b.HasIndex("UserId");

                    b.HasIndex("AssignmentType", "Status")
                        .HasDatabaseName("IX_TemplateAssignments_Type");

                    b.HasIndex("EffectiveFrom", "EffectiveUntil")
                        .HasDatabaseName("IX_TemplateAssignment_EffectivePeriod");

                    b.HasIndex("TemplateId", "Status")
                        .HasDatabaseName("IX_TemplateAssignments_Template");

                    b.HasIndex("TenantGroupId", "Status")
                        .HasDatabaseName("IX_TemplateAssignments_TenantGroup");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_TemplateAssignments_Tenant");

                    b.HasIndex("TenantType", "Status")
                        .HasDatabaseName("IX_TemplateAssignments_TenantType");

                    b.HasIndex("TemplateId", "Status", "EffectiveFrom")
                        .HasDatabaseName("IX_TemplateAssignment_Template_Status_Effective");

                    b.ToTable("FormTemplateAssignments", t =>
                        {
                            t.HasCheckConstraint("CK_TemplateAssignment_Status", "Status IN ('Active', 'Suspended', 'Revoked')");

                            t.HasCheckConstraint("CK_TemplateAssignment_Target", "(AssignmentType = 'All' AND TenantType IS NULL AND TenantGroupId IS NULL AND TenantId IS NULL AND RoleId IS NULL AND DepartmentId IS NULL AND UserGroupId IS NULL AND UserId IS NULL) OR\n                  (AssignmentType = 'TenantType' AND TenantType IS NOT NULL AND TenantGroupId IS NULL AND TenantId IS NULL AND RoleId IS NULL AND DepartmentId IS NULL AND UserGroupId IS NULL AND UserId IS NULL) OR\n                  (AssignmentType = 'TenantGroup' AND TenantGroupId IS NOT NULL AND TenantType IS NULL AND TenantId IS NULL AND RoleId IS NULL AND DepartmentId IS NULL AND UserGroupId IS NULL AND UserId IS NULL) OR\n                  (AssignmentType = 'SpecificTenant' AND TenantId IS NOT NULL AND TenantType IS NULL AND TenantGroupId IS NULL AND RoleId IS NULL AND DepartmentId IS NULL AND UserGroupId IS NULL AND UserId IS NULL) OR\n                  (AssignmentType = 'Role' AND RoleId IS NOT NULL AND TenantType IS NULL AND TenantGroupId IS NULL AND TenantId IS NULL AND DepartmentId IS NULL AND UserGroupId IS NULL AND UserId IS NULL) OR\n                  (AssignmentType = 'Department' AND DepartmentId IS NOT NULL AND TenantType IS NULL AND TenantGroupId IS NULL AND TenantId IS NULL AND RoleId IS NULL AND UserGroupId IS NULL AND UserId IS NULL) OR\n                  (AssignmentType = 'UserGroup' AND UserGroupId IS NOT NULL AND TenantType IS NULL AND TenantGroupId IS NULL AND TenantId IS NULL AND RoleId IS NULL AND DepartmentId IS NULL AND UserId IS NULL) OR\n                  (AssignmentType = 'SpecificUser' AND UserId IS NOT NULL AND TenantType IS NULL AND TenantGroupId IS NULL AND TenantId IS NULL AND RoleId IS NULL AND DepartmentId IS NULL AND UserGroupId IS NULL)");

                            t.HasCheckConstraint("CK_TemplateAssignment_Type", "AssignmentType IN ('All', 'TenantType', 'TenantGroup', 'SpecificTenant', 'Role', 'Department', 'UserGroup', 'SpecificUser')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateItem", b =>
                {
                    b.Property<int>("ItemId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("ItemId"));

                    b.Property<string>("ConditionalLogic")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("DataType")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("DefaultValue")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("DisplayOrder")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<string>("HelpText")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsLibraryOverride")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsRequired")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<string>("ItemCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("ItemDescription")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<string>("ItemName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("LayoutType")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)")
                        .HasDefaultValue("Single");

                    b.Property<int?>("LibraryFieldId")
                        .HasColumnType("int");

                    b.Property<int?>("MatrixGroupId")
                        .HasColumnType("int");

                    b.Property<string>("MatrixRowLabel")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("PlaceholderText")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("PrefixText")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<int>("SectionId")
                        .HasColumnType("int");

                    b.Property<string>("SuffixText")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<int>("TemplateId")
                        .HasColumnType("int");

                    b.Property<int>("Version")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(1);

                    b.HasKey("ItemId");

                    b.HasIndex("LibraryFieldId")
                        .HasDatabaseName("IX_TemplateItems_Library");

                    b.HasIndex("LayoutType", "MatrixGroupId")
                        .HasDatabaseName("IX_TemplateItems_Layout");

                    b.HasIndex("SectionId", "DisplayOrder")
                        .HasDatabaseName("IX_TemplateItems_Section");

                    b.HasIndex("TemplateId", "DisplayOrder", "IsActive")
                        .HasDatabaseName("IX_TemplateItems_Template");

                    b.HasIndex("TemplateId", "ItemCode", "Version")
                        .IsUnique()
                        .HasDatabaseName("UQ_TemplateItem");

                    b.ToTable("FormTemplateItems", t =>
                        {
                            t.HasCheckConstraint("CK_Item_LayoutType", "LayoutType IN ('Single', 'Matrix', 'Grid', 'Inline')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateMetricMapping", b =>
                {
                    b.Property<int>("MappingId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MappingId"));

                    b.Property<string>("AggregationType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<string>("MappingName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("MappingType")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<int?>("MetricId")
                        .HasColumnType("int");

                    b.Property<int>("TemplateId")
                        .HasColumnType("int");

                    b.HasKey("MappingId");

                    b.HasIndex("MetricId");

                    b.HasIndex("TemplateId");

                    b.HasIndex("TemplateId", "MappingName")
                        .IsUnique();

                    b.ToTable("FormTemplateMetricMappings");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateMetricSource", b =>
                {
                    b.Property<int>("Id")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("Id"));

                    b.Property<int>("DisplayOrder")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<int>("SectionMappingId")
                        .HasColumnType("int");

                    b.Property<int>("TemplateMappingId")
                        .HasColumnType("int");

                    b.Property<decimal?>("Weight")
                        .HasColumnType("decimal(5,4)");

                    b.HasKey("Id");

                    b.HasIndex("SectionMappingId");

                    b.HasIndex("TemplateMappingId");

                    b.HasIndex("TemplateMappingId", "SectionMappingId")
                        .IsUnique();

                    b.ToTable("FormTemplateMetricSources");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateResponse", b =>
                {
                    b.Property<long>("ResponseId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("ResponseId"));

                    b.Property<bool?>("BooleanValue")
                        .HasColumnType("bit");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<DateTime?>("DateValue")
                        .HasColumnType("date");

                    b.Property<int>("ItemId")
                        .HasColumnType("int");

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<decimal?>("NumericValue")
                        .HasColumnType("decimal(18,4)");

                    b.Property<string>("Remarks")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<int?>("SelectedOptionId")
                        .HasColumnType("int");

                    b.Property<decimal?>("SelectedScoreValue")
                        .HasColumnType("decimal(10,2)");

                    b.Property<decimal?>("SelectedScoreWeight")
                        .HasColumnType("decimal(10,2)");

                    b.Property<int>("SubmissionId")
                        .HasColumnType("int");

                    b.Property<string>("TextValue")
                        .HasColumnType("nvarchar(max)");

                    b.Property<decimal?>("WeightedScore")
                        .HasColumnType("decimal(10,2)");

                    b.HasKey("ResponseId");

                    b.HasIndex("ItemId");

                    b.HasIndex("SelectedOptionId");

                    b.HasIndex("SubmissionId")
                        .HasDatabaseName("IX_TemplateResponses_Submission");

                    b.HasIndex("SubmissionId", "ItemId")
                        .IsUnique()
                        .HasDatabaseName("UQ_SubmissionItem");

                    b.ToTable("FormTemplateResponses");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateSection", b =>
                {
                    b.Property<int>("SectionId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("SectionId"));

                    b.Property<int>("ColumnLayout")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(1);

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<int>("DisplayOrder")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<string>("IconClass")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsCollapsedByDefault")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsCollapsible")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("SectionDescription")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("SectionName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int>("TemplateId")
                        .HasColumnType("int");

                    b.HasKey("SectionId");

                    b.HasIndex("TemplateId", "DisplayOrder")
                        .HasDatabaseName("IX_TemplateSections_Template");

                    b.HasIndex("TemplateId", "SectionName")
                        .IsUnique()
                        .HasDatabaseName("UQ_TemplateSection_Name");

                    b.ToTable("FormTemplateSections");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateSubmission", b =>
                {
                    b.Property<int>("SubmissionId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("SubmissionId"));

                    b.Property<string>("ApprovalComments")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<int>("CurrentSection")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<DateTime?>("LastSavedDate")
                        .HasColumnType("datetime2");

                    b.Property<int?>("ModifiedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<byte>("ReportingMonth")
                        .HasColumnType("tinyint");

                    b.Property<DateTime>("ReportingPeriod")
                        .HasColumnType("date");

                    b.Property<int>("ReportingYear")
                        .HasColumnType("int");

                    b.Property<int?>("ReviewedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("ReviewedDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime>("SnapshotDate")
                        .HasColumnType("date");

                    b.Property<string>("Status")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)")
                        .HasDefaultValue("Draft");

                    b.Property<int>("SubmittedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("SubmittedDate")
                        .HasColumnType("datetime2");

                    b.Property<int>("TemplateId")
                        .HasColumnType("int");

                    b.Property<int?>("TenantId")
                        .HasColumnType("int");

                    b.HasKey("SubmissionId");

                    b.HasIndex("ModifiedBy");

                    b.HasIndex("ReviewedBy");

                    b.HasIndex("TemplateId");

                    b.HasIndex("Status", "TenantId")
                        .HasDatabaseName("IX_TemplateSubmissions_Status");

                    b.HasIndex("SubmittedBy", "ReportingPeriod")
                        .HasDatabaseName("IX_Submission_User_Period");

                    b.HasIndex("SubmittedBy", "Status")
                        .HasDatabaseName("IX_Submission_User_Status");

                    SqlServerIndexBuilderExtensions.IncludeProperties(b.HasIndex("SubmittedBy", "Status"), new[] { "TemplateId", "CreatedDate", "LastSavedDate" });

                    b.HasIndex("TenantId", "ReportingPeriod")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_TemplateSubmissions_Tenant_Recent")
                        .HasFilter("Status IN ('Submitted', 'Approved')");

                    b.HasIndex("ReportingPeriod", "TenantId", "TemplateId")
                        .IsDescending(true, false, false)
                        .HasDatabaseName("IX_TemplateSubmissions_TimeSeries");

                    SqlServerIndexBuilderExtensions.IncludeProperties(b.HasIndex("ReportingPeriod", "TenantId", "TemplateId"), new[] { "Status", "SubmittedBy" });

                    b.HasIndex("SubmittedBy", "TemplateId", "ReportingPeriod")
                        .IsUnique()
                        .HasDatabaseName("IX_Submission_User_Unique")
                        .HasFilter("TenantId IS NULL AND Status <> 'Draft'");

                    b.HasIndex("TenantId", "TemplateId", "ReportingPeriod")
                        .IsUnique()
                        .HasDatabaseName("IX_Submission_Location_Unique")
                        .HasFilter("TenantId IS NOT NULL AND Status <> 'Draft'");

                    b.ToTable("FormTemplateSubmissions");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateSubmissionRule", b =>
                {
                    b.Property<int>("SubmissionRuleId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("SubmissionRuleId"));

                    b.Property<bool>("AllowLateSubmission")
                        .HasColumnType("bit");

                    b.Property<int>("CreatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int?>("DueDay")
                        .HasColumnType("int");

                    b.Property<int?>("DueMonth")
                        .HasColumnType("int");

                    b.Property<TimeSpan?>("DueTime")
                        .HasColumnType("time");

                    b.Property<string>("Frequency")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<int>("GracePeriodDays")
                        .HasColumnType("int");

                    b.Property<int?>("ModifiedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("ModifiedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("ReminderDaysBefore")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("RuleConfig")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("RuleName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<DateTime?>("SpecificDueDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("Status")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)")
                        .HasDefaultValue("Active");

                    b.Property<int>("TemplateId")
                        .HasColumnType("int");

                    b.HasKey("SubmissionRuleId");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("ModifiedBy");

                    b.HasIndex("Status");

                    b.HasIndex("TemplateId");

                    b.HasIndex("TemplateId", "Status");

                    b.ToTable("FormTemplateSubmissionRules", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.MetricPopulationLog", b =>
                {
                    b.Property<long>("LogId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("LogId"));

                    b.Property<decimal?>("CalculatedValue")
                        .HasColumnType("decimal(18,4)");

                    b.Property<string>("CalculationFormula")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ErrorMessage")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("MappingId")
                        .HasColumnType("int");

                    b.Property<int?>("MetricId")
                        .HasColumnType("int");

                    b.Property<int?>("PopulatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("PopulatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<int?>("ProcessingTimeMs")
                        .HasColumnType("int");

                    b.Property<int>("SourceItemId")
                        .HasColumnType("int");

                    b.Property<string>("SourceValue")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<int>("SubmissionId")
                        .HasColumnType("int");

                    b.HasKey("LogId");

                    b.HasIndex("MappingId");

                    b.HasIndex("PopulatedBy");

                    b.HasIndex("PopulatedDate")
                        .IsDescending()
                        .HasDatabaseName("IX_MetricLog_Date");

                    b.HasIndex("SourceItemId");

                    b.HasIndex("MetricId", "PopulatedDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_MetricLog_Metric");

                    b.HasIndex("Status", "PopulatedDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_MetricLog_Status");

                    b.HasIndex("SubmissionId", "Status")
                        .HasDatabaseName("IX_MetricLog_Submission");

                    b.ToTable("MetricPopulationLog", t =>
                        {
                            t.HasCheckConstraint("CK_MetricLog_Status", "Status IN ('Success', 'Failed', 'Skipped', 'Pending')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.SectionRouting", b =>
                {
                    b.Property<int>("RoutingId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("RoutingId"));

                    b.Property<string>("ConditionType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("ConditionValue")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int>("SourceItemId")
                        .HasColumnType("int");

                    b.Property<int>("SourceSectionId")
                        .HasColumnType("int");

                    b.Property<int?>("TargetSectionId")
                        .HasColumnType("int");

                    b.HasKey("RoutingId");

                    b.HasIndex("TargetSectionId")
                        .HasDatabaseName("IX_SectionRouting_Target");

                    b.HasIndex("SourceItemId", "IsActive")
                        .HasDatabaseName("IX_SectionRouting_Item");

                    b.HasIndex("SourceSectionId", "IsActive")
                        .HasDatabaseName("IX_SectionRouting_Source");

                    b.ToTable("SectionRouting", t =>
                        {
                            t.HasCheckConstraint("CK_Routing_Condition", "ConditionType IN ('equals', 'not_equals', 'contains', 'greater_than', 'less_than', 'is_empty')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.SubmissionWorkflowProgress", b =>
                {
                    b.Property<int>("ProgressId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("ProgressId"));

                    b.Property<int?>("ActionId")
                        .HasColumnType("int");

                    b.Property<DateTime?>("AssignedDate")
                        .HasColumnType("datetime2");

                    b.Property<int?>("AssignedTo")
                        .HasColumnType("int");

                    b.Property<string>("Comments")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<int?>("DelegatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("DelegatedDate")
                        .HasColumnType("datetime2");

                    b.Property<int?>("DelegatedTo")
                        .HasColumnType("int");

                    b.Property<string>("DelegationReason")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<DateTime?>("DueDate")
                        .HasColumnType("datetime2");

                    b.Property<int?>("ReviewedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("ReviewedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("SignatureData")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("SignatureIP")
                        .HasMaxLength(45)
                        .HasColumnType("nvarchar(45)");

                    b.Property<DateTime?>("SignatureTimestamp")
                        .HasColumnType("datetime2");

                    b.Property<string>("SignatureType")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("Status")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)")
                        .HasDefaultValue("Pending");

                    b.Property<int>("StepId")
                        .HasColumnType("int");

                    b.Property<int>("StepOrder")
                        .HasColumnType("int");

                    b.Property<int>("SubmissionId")
                        .HasColumnType("int");

                    b.Property<int?>("TargetId")
                        .HasColumnType("int");

                    b.Property<string>("TargetType")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.HasKey("ProgressId");

                    b.HasIndex("ActionId")
                        .HasDatabaseName("IX_Progress_Action");

                    b.HasIndex("AssignedTo")
                        .HasDatabaseName("IX_Progress_AssignedTo");

                    b.HasIndex("DelegatedBy");

                    b.HasIndex("DelegatedTo")
                        .HasDatabaseName("IX_Progress_Delegated")
                        .HasFilter("DelegatedTo IS NOT NULL");

                    b.HasIndex("DueDate")
                        .HasDatabaseName("IX_Progress_DueDate")
                        .HasFilter("Status = 'Pending'");

                    b.HasIndex("ReviewedBy");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_Progress_Status");

                    b.HasIndex("StepId");

                    b.HasIndex("TargetType")
                        .HasDatabaseName("IX_Progress_TargetType");

                    b.HasIndex("AssignedTo", "Status")
                        .HasDatabaseName("IX_Progress_AssignedTo_Status");

                    b.HasIndex("SubmissionId", "StepId")
                        .IsUnique()
                        .HasDatabaseName("UQ_Progress_Submission_Step");

                    b.HasIndex("SubmissionId", "StepOrder")
                        .HasDatabaseName("IX_Progress_Submission_Order");

                    b.ToTable("SubmissionWorkflowProgress");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.WorkflowAction", b =>
                {
                    b.Property<int>("ActionId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("ActionId"));

                    b.Property<string>("ActionCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("ActionName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<bool>("AllowDelegate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<string>("CssClass")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("DisplayOrder")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<string>("IconClass")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<bool>("RequiresComment")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<bool>("RequiresSignature")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.HasKey("ActionId");

                    b.HasIndex("ActionCode")
                        .IsUnique()
                        .HasDatabaseName("UQ_WorkflowAction_Code");

                    b.HasIndex("DisplayOrder")
                        .HasDatabaseName("IX_WorkflowAction_DisplayOrder");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_WorkflowAction_Active");

                    b.ToTable("WorkflowActions");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.WorkflowDefinition", b =>
                {
                    b.Property<int>("WorkflowId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("WorkflowId"));

                    b.Property<int>("CreatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("WorkflowName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("WorkflowId");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_Workflow_Active");

                    b.ToTable("WorkflowDefinitions");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.WorkflowStep", b =>
                {
                    b.Property<int>("StepId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("StepId"));

                    b.Property<int?>("ActionId")
                        .HasColumnType("int");

                    b.Property<int?>("ApproverRoleId")
                        .HasColumnType("int");

                    b.Property<int?>("ApproverUserId")
                        .HasColumnType("int");

                    b.Property<int?>("AssigneeDepartmentId")
                        .HasColumnType("int");

                    b.Property<int?>("AssigneeFieldId")
                        .HasColumnType("int");

                    b.Property<string>("AssigneeType")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)")
                        .HasDefaultValue("Role");

                    b.Property<string>("AutoApproveCondition")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ConditionLogic")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("DependsOnStepIds")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int?>("DueDays")
                        .HasColumnType("int");

                    b.Property<int?>("EscalationRoleId")
                        .HasColumnType("int");

                    b.Property<bool>("IsMandatory")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsParallel")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<string>("StepName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int>("StepOrder")
                        .HasColumnType("int");

                    b.Property<int?>("TargetId")
                        .HasColumnType("int");

                    b.Property<string>("TargetType")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)")
                        .HasDefaultValue("Submission");

                    b.Property<int>("WorkflowId")
                        .HasColumnType("int");

                    b.HasKey("StepId");

                    b.HasIndex("ActionId")
                        .HasDatabaseName("IX_WorkflowStep_Action");

                    b.HasIndex("ApproverRoleId");

                    b.HasIndex("ApproverUserId");

                    b.HasIndex("AssigneeDepartmentId");

                    b.HasIndex("AssigneeFieldId");

                    b.HasIndex("AssigneeType")
                        .HasDatabaseName("IX_WorkflowStep_AssigneeType");

                    b.HasIndex("EscalationRoleId")
                        .HasDatabaseName("IX_WorkflowStep_Escalation");

                    b.HasIndex("TargetType")
                        .HasDatabaseName("IX_WorkflowStep_TargetType");

                    b.HasIndex("WorkflowId", "StepOrder")
                        .IsUnique()
                        .HasDatabaseName("IX_WorkflowStep_Workflow");

                    b.ToTable("WorkflowSteps");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Hardware.HardwareCategory", b =>
                {
                    b.Property<int>("CategoryId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("CategoryId"));

                    b.Property<string>("CategoryCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("CategoryName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int?>("ParentCategoryId")
                        .HasColumnType("int");

                    b.HasKey("CategoryId");

                    b.HasIndex("CategoryCode")
                        .IsUnique();

                    b.HasIndex("ParentCategoryId");

                    b.ToTable("HardwareCategories");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Hardware.HardwareItem", b =>
                {
                    b.Property<int>("HardwareItemId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("HardwareItemId"));

                    b.Property<int>("CategoryId")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<string>("ItemCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("ItemName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("Manufacturer")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("Model")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("Specifications")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("HardwareItemId");

                    b.HasIndex("CategoryId");

                    b.HasIndex("ItemCode")
                        .IsUnique();

                    b.ToTable("HardwareItems");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Hardware.HardwareMaintenanceLog", b =>
                {
                    b.Property<int>("LogId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("LogId"));

                    b.Property<decimal?>("Cost")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("Description")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("MaintenanceDate")
                        .HasColumnType("date");

                    b.Property<string>("MaintenanceType")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<DateTime?>("NextMaintenanceDate")
                        .HasColumnType("date");

                    b.Property<int?>("PerformedBy")
                        .HasColumnType("int");

                    b.Property<int>("TenantHardwareId")
                        .HasColumnType("int");

                    b.HasKey("LogId");

                    b.HasIndex("TenantHardwareId");

                    b.ToTable("HardwareMaintenanceLog", t =>
                        {
                            t.HasCheckConstraint("CK_Maintenance_Type", "MaintenanceType IS NULL OR MaintenanceType IN ('Preventive', 'Corrective', 'Upgrade', 'Emergency', 'Calibration', 'Inspection')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Hardware.TenantHardware", b =>
                {
                    b.Property<int>("TenantHardwareId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("TenantHardwareId"));

                    b.Property<string>("AssetTag")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<int>("HardwareItemId")
                        .HasColumnType("int");

                    b.Property<string>("Location")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<DateTime?>("PurchaseDate")
                        .HasColumnType("date");

                    b.Property<int>("Quantity")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(1);

                    b.Property<string>("Remarks")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<string>("SerialNumber")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("Status")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<int>("TenantId")
                        .HasColumnType("int");

                    b.Property<DateTime?>("WarrantyExpiryDate")
                        .HasColumnType("date");

                    b.HasKey("TenantHardwareId");

                    b.HasIndex("HardwareItemId");

                    b.HasIndex("Status")
                        .HasDatabaseName("IX_TenantHw_Status")
                        .HasFilter("Status != 'Retired'");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_TenantHw_Tenant");

                    b.ToTable("TenantHardware", t =>
                        {
                            t.HasCheckConstraint("CK_TenantHw_Status", "Status IS NULL OR Status IN ('Operational', 'Faulty', 'UnderRepair', 'Retired', 'InStorage', 'PendingDeployment', 'Disposed')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.MenuItem", b =>
                {
                    b.Property<int>("MenuItemId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MenuItemId"));

                    b.Property<string>("Action")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("Area")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("Controller")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<int>("DisplayOrder")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<string>("Icon")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsVisible")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int>("Level")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(1);

                    b.Property<string>("MenuCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("MenuTitle")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<int?>("ModuleId")
                        .HasColumnType("int");

                    b.Property<int?>("ParentMenuItemId")
                        .HasColumnType("int");

                    b.Property<bool>("RequiresAuth")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<string>("Route")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.HasKey("MenuItemId");

                    b.HasIndex("DisplayOrder")
                        .HasDatabaseName("IX_MenuItem_Order");

                    b.HasIndex("MenuCode")
                        .IsUnique()
                        .HasDatabaseName("UQ_MenuItem_Code");

                    b.HasIndex("ModuleId")
                        .HasDatabaseName("IX_MenuItem_Module");

                    b.HasIndex("IsActive", "IsVisible")
                        .HasDatabaseName("IX_MenuItem_Active");

                    b.HasIndex("ParentMenuItemId", "DisplayOrder")
                        .HasDatabaseName("IX_MenuItem_Parent");

                    b.ToTable("MenuItems", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.MenuSection", b =>
                {
                    b.Property<int>("MenuSectionId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MenuSectionId"));

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("DisplayOrder")
                        .HasColumnType("int");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit");

                    b.Property<DateTime>("ModifiedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("SectionCode")
                        .HasMaxLength(10)
                        .HasColumnType("nvarchar(10)");

                    b.Property<string>("SectionName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("MenuSectionId");

                    b.ToTable("MenuSections", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.Module", b =>
                {
                    b.Property<int>("ModuleId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("ModuleId"));

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("DisplayOrder")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<string>("Icon")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int?>("MenuSectionId")
                        .HasColumnType("int");

                    b.Property<string>("ModuleCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("ModuleName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("ModuleId");

                    b.HasIndex("MenuSectionId");

                    b.HasIndex("ModuleCode")
                        .IsUnique()
                        .HasDatabaseName("IX_Modules_Code");

                    b.HasIndex("ModuleName")
                        .IsUnique()
                        .HasDatabaseName("UQ_Module_Name");

                    b.HasIndex("IsActive", "DisplayOrder")
                        .HasDatabaseName("IX_Modules_Active");

                    b.ToTable("Modules", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.Permission", b =>
                {
                    b.Property<int>("PermissionId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("PermissionId"));

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int>("ModuleId")
                        .HasColumnType("int");

                    b.Property<string>("PermissionCode")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("PermissionName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("PermissionType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.HasKey("PermissionId");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_Permission_Active");

                    b.HasIndex("PermissionCode")
                        .IsUnique()
                        .HasDatabaseName("IX_Permission_Code");

                    b.HasIndex("ModuleId", "IsActive")
                        .HasDatabaseName("IX_Permission_Module");

                    b.HasIndex("ModuleId", "PermissionCode")
                        .IsUnique()
                        .HasDatabaseName("UQ_Permission_Module");

                    b.HasIndex("PermissionType", "IsActive")
                        .HasDatabaseName("IX_Permission_Type");

                    b.ToTable("Permissions", null, t =>
                        {
                            t.HasCheckConstraint("CHK_Permission_Type", "PermissionType IN ('View', 'Create', 'Edit', 'Delete', 'Approve', 'Export', 'Manage', 'Custom')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.Role", b =>
                {
                    b.Property<int>("RoleId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("RoleId"));

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<string>("RoleCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("RoleName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int>("ScopeLevelId")
                        .HasColumnType("int");

                    b.HasKey("RoleId");

                    b.HasIndex("RoleCode")
                        .IsUnique()
                        .HasDatabaseName("UQ_Role_Code");

                    b.HasIndex("RoleName")
                        .IsUnique()
                        .HasDatabaseName("UQ_Role_Name");

                    b.HasIndex("ScopeLevelId");

                    b.ToTable("Roles", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.RoleMenuItem", b =>
                {
                    b.Property<int>("RoleMenuItemId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("RoleMenuItemId"));

                    b.Property<DateTime>("AssignedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<bool>("IsVisible")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int>("MenuItemId")
                        .HasColumnType("int");

                    b.Property<int>("RoleId")
                        .HasColumnType("int");

                    b.HasKey("RoleMenuItemId");

                    b.HasIndex("MenuItemId")
                        .HasDatabaseName("IX_RoleMenuItem_MenuItem");

                    b.HasIndex("RoleId", "IsVisible")
                        .HasDatabaseName("IX_RoleMenuItem_Role");

                    b.HasIndex("RoleId", "MenuItemId")
                        .IsUnique()
                        .HasDatabaseName("UQ_RoleMenuItem");

                    b.ToTable("RoleMenuItems", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.RolePermission", b =>
                {
                    b.Property<int>("RolePermissionId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("RolePermissionId"));

                    b.Property<int?>("AssignedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("AssignedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<bool>("IsGranted")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int>("PermissionId")
                        .HasColumnType("int");

                    b.Property<int>("RoleId")
                        .HasColumnType("int");

                    b.HasKey("RolePermissionId");

                    b.HasIndex("AssignedBy");

                    b.HasIndex("PermissionId")
                        .HasDatabaseName("IX_RolePermission_Permission");

                    b.HasIndex("RoleId", "IsGranted")
                        .HasDatabaseName("IX_RolePermission_Role");

                    b.HasIndex("RoleId", "PermissionId")
                        .IsUnique()
                        .HasDatabaseName("UQ_RolePermission");

                    b.ToTable("RolePermissions", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.ScopeLevel", b =>
                {
                    b.Property<int>("ScopeLevelId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("ScopeLevelId"));

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int>("Level")
                        .HasColumnType("int");

                    b.Property<string>("ScopeCode")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("ScopeName")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.HasKey("ScopeLevelId");

                    b.HasIndex("Level")
                        .HasDatabaseName("IX_ScopeLevel_Level");

                    b.HasIndex("ScopeCode")
                        .IsUnique()
                        .HasDatabaseName("UQ_ScopeLevel_Code");

                    b.HasIndex("ScopeName")
                        .IsUnique()
                        .HasDatabaseName("UQ_ScopeLevel_Name");

                    b.ToTable("ScopeLevels", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.User", b =>
                {
                    b.Property<int>("UserId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("UserId"));

                    b.Property<int>("AccessFailedCount")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<int?>("DepartmentId")
                        .HasColumnType("int");

                    b.Property<string>("Email")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<bool>("EmailConfirmed")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<string>("EmployeeNumber")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("FirstName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<DateTime?>("LastLoginDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("LastName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<bool>("LockoutEnabled")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<DateTimeOffset?>("LockoutEnd")
                        .HasColumnType("datetimeoffset");

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("NormalizedEmail")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<string>("NormalizedUserName")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.Property<string>("PasswordHash")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("PhoneNumber")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("PhoneNumberConfirmed")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<string>("SecurityStamp")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("TenantId")
                        .HasColumnType("int");

                    b.Property<bool>("TwoFactorEnabled")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<string>("UserName")
                        .IsRequired()
                        .HasMaxLength(256)
                        .HasColumnType("nvarchar(256)");

                    b.HasKey("UserId");

                    b.HasIndex("DepartmentId")
                        .HasDatabaseName("IX_User_Department");

                    b.HasIndex("EmployeeNumber")
                        .IsUnique()
                        .HasDatabaseName("UQ_User_EmployeeNumber")
                        .HasFilter("EmployeeNumber IS NOT NULL");

                    b.HasIndex("NormalizedEmail")
                        .HasDatabaseName("IX_Users_Email");

                    b.HasIndex("NormalizedUserName")
                        .HasDatabaseName("IX_Users_Username");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_User_PrimaryTenant");

                    b.HasIndex("UserName")
                        .IsUnique()
                        .HasDatabaseName("UQ_User_UserName");

                    b.ToTable("Users", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.UserGroup", b =>
                {
                    b.Property<int>("UserGroupId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("UserGroupId"));

                    b.Property<int>("CreatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("GroupCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("GroupName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("GroupType")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<int?>("TenantId")
                        .HasColumnType("int");

                    b.HasKey("UserGroupId");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("GroupCode")
                        .IsUnique()
                        .HasDatabaseName("IX_UserGroup_Code");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_UserGroup_Active");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_UserGroup_Tenant");

                    b.ToTable("UserGroups", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.UserGroupMember", b =>
                {
                    b.Property<int>("UserGroupMemberId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("UserGroupMemberId"));

                    b.Property<int>("AddedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("AddedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<int>("UserGroupId")
                        .HasColumnType("int");

                    b.Property<int>("UserId")
                        .HasColumnType("int");

                    b.HasKey("UserGroupMemberId");

                    b.HasIndex("AddedBy");

                    b.HasIndex("UserGroupId")
                        .HasDatabaseName("IX_UserGroupMember_Group");

                    b.HasIndex("UserId")
                        .HasDatabaseName("IX_UserGroupMember_User");

                    b.HasIndex("UserGroupId", "UserId")
                        .IsUnique()
                        .HasDatabaseName("UQ_UserGroupMember_Group_User");

                    b.ToTable("UserGroupMembers", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.UserRole", b =>
                {
                    b.Property<int>("UserRoleId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("UserRoleId"));

                    b.Property<int?>("AssignedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("AssignedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<int>("RoleId")
                        .HasColumnType("int");

                    b.Property<int>("UserId")
                        .HasColumnType("int");

                    b.HasKey("UserRoleId");

                    b.HasIndex("AssignedBy");

                    b.HasIndex("RoleId")
                        .HasDatabaseName("IX_UserRoles_Role");

                    b.HasIndex("UserId")
                        .HasDatabaseName("IX_UserRoles_User");

                    b.HasIndex("UserId", "RoleId")
                        .IsUnique()
                        .HasDatabaseName("UQ_UserRole");

                    b.ToTable("UserRoles", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.UserTenantAccess", b =>
                {
                    b.Property<int>("AccessId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("AccessId"));

                    b.Property<DateTime?>("ExpiryDate")
                        .HasColumnType("datetime2");

                    b.Property<int>("GrantedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("GrantedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<string>("Reason")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("TenantId")
                        .HasColumnType("int");

                    b.Property<int>("UserId")
                        .HasColumnType("int");

                    b.HasKey("AccessId");

                    b.HasIndex("ExpiryDate")
                        .HasDatabaseName("IX_UserTenantAccess_Expiry")
                        .HasFilter("ExpiryDate IS NOT NULL AND IsActive = 1");

                    b.HasIndex("GrantedBy");

                    b.HasIndex("TenantId", "IsActive")
                        .HasDatabaseName("IX_UserTenantAccess_Tenant");

                    b.HasIndex("UserId", "IsActive")
                        .HasDatabaseName("IX_UserTenantAccess_User");

                    b.HasIndex("UserId", "TenantId")
                        .IsUnique()
                        .HasDatabaseName("UQ_UserTenant");

                    b.ToTable("UserTenantAccess", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Media.EntityMediaFile", b =>
                {
                    b.Property<long>("EntityMediaId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("EntityMediaId"));

                    b.Property<int>("AttachedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("AttachedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("AttachmentType")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("Caption")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("DisplayOrder")
                        .HasColumnType("int");

                    b.Property<long>("EntityId")
                        .HasColumnType("bigint");

                    b.Property<string>("EntityType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("FieldName")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<long>("FileId")
                        .HasColumnType("bigint");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit");

                    b.Property<bool>("IsPrimary")
                        .HasColumnType("bit");

                    b.Property<bool>("IsRequired")
                        .HasColumnType("bit");

                    b.Property<DateTime>("ModifiedDate")
                        .HasColumnType("datetime2");

                    b.Property<long?>("ResponseId")
                        .HasColumnType("bigint");

                    b.HasKey("EntityMediaId");

                    b.HasIndex("AttachedBy");

                    b.HasIndex("ResponseId")
                        .HasDatabaseName("IX_EntityMedia_Response")
                        .HasFilter("[ResponseId] IS NOT NULL");

                    b.HasIndex("AttachmentType", "EntityType")
                        .HasDatabaseName("IX_EntityMedia_Type");

                    b.HasIndex("EntityType", "EntityId")
                        .IsUnique()
                        .HasDatabaseName("UQ_EntityMedia_OnePrimary")
                        .HasFilter("[IsPrimary] = 1 AND [IsActive] = 1");

                    b.HasIndex("FileId", "IsActive")
                        .HasDatabaseName("IX_EntityMedia_File");

                    b.HasIndex("EntityType", "EntityId", "IsActive")
                        .HasDatabaseName("IX_EntityMedia_Entity");

                    b.HasIndex("EntityType", "EntityId", "IsPrimary")
                        .HasDatabaseName("IX_EntityMedia_Primary")
                        .HasFilter("[IsPrimary] = 1 AND [IsActive] = 1");

                    b.ToTable("EntityMediaFiles", t =>
                        {
                            t.HasCheckConstraint("CK_EntityMedia_Type", "[EntityType] IN ('Expense', 'Budget', 'Ticket', 'FormResponse', 'FormSubmission', 'Hardware', 'Software', 'User', 'Tenant', 'Training', 'Project', 'Maintenance', 'Audit', 'Report', 'Other')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Media.FileAccessLog", b =>
                {
                    b.Property<long>("AccessLogId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("AccessLogId"));

                    b.Property<DateTime>("AccessDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("AccessResult")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("AccessType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<int>("AccessedBy")
                        .HasColumnType("int");

                    b.Property<long>("FileId")
                        .HasColumnType("bigint");

                    b.Property<string>("IPAddress")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("UserAgent")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.HasKey("AccessLogId");

                    b.HasIndex("AccessDate")
                        .IsDescending()
                        .HasDatabaseName("IX_FileAccess_Date");

                    b.HasIndex("AccessType", "AccessDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_FileAccess_Type");

                    b.HasIndex("AccessedBy", "AccessDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_FileAccess_User");

                    b.HasIndex("FileId", "AccessDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_FileAccess_File");

                    b.ToTable("FileAccessLog", t =>
                        {
                            t.HasCheckConstraint("CK_FileAccess_Result", "[AccessResult] IN ('Success', 'Denied', 'NotFound', 'Error')");

                            t.HasCheckConstraint("CK_FileAccess_Type", "[AccessType] IN ('View', 'Download', 'Delete', 'Update', 'Share', 'Scan')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Media.MediaFile", b =>
                {
                    b.Property<long>("FileId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("FileId"));

                    b.Property<int>("AccessCount")
                        .HasColumnType("int");

                    b.Property<string>("AccessLevel")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("DeleteReason")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int?>("DeletedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("DeletedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("DocumentTitle")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("EncryptionKey")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<DateTime?>("ExpiryDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("FileExtension")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("FileHash")
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)");

                    b.Property<string>("FileName")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("nvarchar(255)");

                    b.Property<long>("FileSize")
                        .HasColumnType("bigint");

                    b.Property<int?>("ImageHeight")
                        .HasColumnType("int");

                    b.Property<int?>("ImageWidth")
                        .HasColumnType("int");

                    b.Property<bool>("IsDeleted")
                        .HasColumnType("bit");

                    b.Property<bool>("IsEncrypted")
                        .HasColumnType("bit");

                    b.Property<bool>("IsImage")
                        .HasColumnType("bit");

                    b.Property<bool>("IsVirusSafe")
                        .HasColumnType("bit");

                    b.Property<DateTime?>("LastAccessedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("MimeType")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<DateTime>("ModifiedDate")
                        .HasColumnType("datetime2");

                    b.Property<int?>("PageCount")
                        .HasColumnType("int");

                    b.Property<string>("SearchableText")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("StorageContainer")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("StoragePath")
                        .IsRequired()
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<string>("StorageProvider")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("StoredFileName")
                        .IsRequired()
                        .HasMaxLength(255)
                        .HasColumnType("nvarchar(255)");

                    b.Property<string>("Tags")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ThumbnailPath")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<int>("UploadedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("UploadedDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime?>("VirusScanDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("VirusScanResult")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("FileId");

                    b.HasIndex("DeletedBy");

                    b.HasIndex("ExpiryDate")
                        .HasDatabaseName("IX_MediaFiles_Expiry")
                        .HasFilter("[ExpiryDate] IS NOT NULL AND [IsDeleted] = 0");

                    b.HasIndex("FileHash")
                        .HasDatabaseName("IX_MediaFiles_Hash")
                        .HasFilter("[FileHash] IS NOT NULL AND [IsDeleted] = 0");

                    b.HasIndex("IsImage")
                        .HasDatabaseName("IX_MediaFiles_Images")
                        .HasFilter("[IsImage] = 1 AND [IsDeleted] = 0");

                    b.HasIndex("IsVirusSafe", "VirusScanDate")
                        .HasDatabaseName("IX_MediaFiles_VirusScan")
                        .HasFilter("[IsDeleted] = 0");

                    b.HasIndex("MimeType", "IsDeleted")
                        .HasDatabaseName("IX_MediaFiles_Type")
                        .HasFilter("[IsDeleted] = 0");

                    b.HasIndex("StorageProvider", "IsDeleted")
                        .HasDatabaseName("IX_MediaFiles_Storage");

                    b.HasIndex("UploadedBy", "UploadedDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_MediaFiles_Uploader");

                    b.ToTable("MediaFiles", t =>
                        {
                            t.HasCheckConstraint("CK_MediaFile_Access", "[AccessLevel] IN ('Public', 'Private', 'Internal', 'Confidential', 'Restricted')");

                            t.HasCheckConstraint("CK_MediaFile_Provider", "[StorageProvider] IN ('Local', 'Azure', 'AWS', 'OneDrive', 'SharePoint', 'GoogleDrive')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Metrics.MetricCategory", b =>
                {
                    b.Property<int>("CategoryId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("CategoryId"));

                    b.Property<string>("CategoryCode")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<string>("CategoryName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("ColorHint")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("DisplayOrder")
                        .HasColumnType("int");

                    b.Property<string>("IconClass")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit");

                    b.HasKey("CategoryId");

                    b.HasIndex("CategoryCode")
                        .IsUnique()
                        .HasDatabaseName("IX_MetricCategories_CategoryCode");

                    b.HasIndex("IsActive", "DisplayOrder")
                        .HasDatabaseName("IX_MetricCategories_Active_Order");

                    b.ToTable("MetricCategories", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Metrics.MetricDefinition", b =>
                {
                    b.Property<int>("MetricId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("MetricId"));

                    b.Property<string>("AggregationType")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<int?>("CategoryId")
                        .HasColumnType("int");

                    b.Property<string>("ComplianceRule")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("DataType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("ExpectedValue")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int?>("HierarchyLevel")
                        .HasColumnType("int");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsKPI")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<string>("MetricCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("MetricName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("MetricScope")
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<int?>("ParentMetricId")
                        .HasColumnType("int");

                    b.Property<string>("SourceType")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<decimal?>("ThresholdGreen")
                        .HasColumnType("decimal(18,4)");

                    b.Property<decimal?>("ThresholdRed")
                        .HasColumnType("decimal(18,4)");

                    b.Property<decimal?>("ThresholdYellow")
                        .HasColumnType("decimal(18,4)");

                    b.Property<int?>("UnitId")
                        .HasColumnType("int");

                    b.HasKey("MetricId");

                    b.HasIndex("MetricCode")
                        .IsUnique();

                    b.HasIndex("ParentMetricId");

                    b.HasIndex("UnitId");

                    b.HasIndex("SourceType", "IsActive")
                        .HasDatabaseName("IX_Metrics_SourceType");

                    b.HasIndex("CategoryId", "IsKPI", "IsActive")
                        .HasDatabaseName("IX_Metrics_Category");

                    b.ToTable("MetricDefinitions", t =>
                        {
                            t.HasCheckConstraint("CK_Metric_AggregationType", "AggregationType IS NULL OR AggregationType IN ('SUM', 'AVG', 'MAX', 'MIN', 'LAST_VALUE', 'COUNT', 'NONE')");

                            t.HasCheckConstraint("CK_Metric_DataType", "DataType IN ('Integer', 'Decimal', 'Percentage', 'Boolean', 'Text', 'Duration', 'Date', 'DateTime')");

                            t.HasCheckConstraint("CK_Metric_SourceType", "SourceType IN ('UserInput', 'SystemCalculated', 'ExternalSystem', 'ComplianceTracking', 'AutomatedCheck')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Metrics.MetricUnit", b =>
                {
                    b.Property<int>("UnitId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("UnitId"));

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<int>("DisplayOrder")
                        .HasColumnType("int");

                    b.Property<string>("FormatPattern")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit");

                    b.Property<string>("SuggestedAggregation")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("UnitCategory")
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<string>("UnitCode")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("UnitName")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("UnitSymbol")
                        .HasMaxLength(10)
                        .HasColumnType("nvarchar(10)");

                    b.HasKey("UnitId");

                    b.HasIndex("UnitCategory")
                        .HasDatabaseName("IX_MetricUnits_Category");

                    b.HasIndex("UnitCode")
                        .IsUnique()
                        .HasDatabaseName("IX_MetricUnits_UnitCode");

                    b.HasIndex("IsActive", "DisplayOrder")
                        .HasDatabaseName("IX_MetricUnits_Active_Order");

                    b.ToTable("MetricUnits", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Metrics.SystemMetricLog", b =>
                {
                    b.Property<long>("LogId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("LogId"));

                    b.Property<DateTime>("CheckDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("Details")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ErrorMessage")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int?>("ExecutionDuration")
                        .HasColumnType("int");

                    b.Property<string>("JobName")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int>("MetricId")
                        .HasColumnType("int");

                    b.Property<decimal?>("NumericValue")
                        .HasColumnType("decimal(18,4)");

                    b.Property<string>("Status")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<int>("TenantId")
                        .HasColumnType("int");

                    b.Property<string>("TextValue")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("LogId");

                    b.HasIndex("MetricId", "CheckDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_SystemMetricLogs_Metric_Date");

                    b.HasIndex("Status", "CheckDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_SystemMetricLogs_Status");

                    b.HasIndex("TenantId", "CheckDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_SystemMetricLogs_Tenant_Date");

                    b.ToTable("SystemMetricLogs");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Metrics.TenantMetric", b =>
                {
                    b.Property<long>("MetricValueId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("MetricValueId"));

                    b.Property<int?>("CapturedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CapturedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<int?>("MetricId")
                        .HasColumnType("int");

                    b.Property<string>("MetricScope")
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<decimal?>("NumericValue")
                        .HasColumnType("decimal(18,4)");

                    b.Property<DateTime>("ReportingPeriod")
                        .HasColumnType("date");

                    b.Property<int?>("SourceMappingId")
                        .HasColumnType("int");

                    b.Property<int?>("SourceReferenceId")
                        .HasColumnType("int");

                    b.Property<string>("SourceType")
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<int>("TenantId")
                        .HasColumnType("int");

                    b.Property<string>("TextValue")
                        .HasColumnType("nvarchar(max)");

                    b.HasKey("MetricValueId");

                    b.HasIndex("MetricId");

                    b.HasIndex("ReportingPeriod")
                        .IsDescending()
                        .HasDatabaseName("IX_TenantMetrics_Period");

                    SqlServerIndexBuilderExtensions.IncludeProperties(b.HasIndex("ReportingPeriod"), new[] { "TenantId", "NumericValue" });

                    b.HasIndex("SourceType", "SourceReferenceId")
                        .HasDatabaseName("IX_TenantMetrics_Source");

                    b.HasIndex("ReportingPeriod", "TenantId", "MetricId")
                        .IsDescending(true, false, false)
                        .HasDatabaseName("IX_TenantMetrics_TimeSeries");

                    SqlServerIndexBuilderExtensions.IncludeProperties(b.HasIndex("ReportingPeriod", "TenantId", "MetricId"), new[] { "NumericValue", "TextValue" });

                    b.HasIndex("TenantId", "MetricId", "ReportingPeriod")
                        .IsUnique()
                        .IsDescending(false, false, true)
                        .HasDatabaseName("IX_TenantMetrics_Tenant")
                        .HasFilter("[MetricId] IS NOT NULL");

                    b.ToTable("TenantMetrics", t =>
                        {
                            t.HasCheckConstraint("CK_TenantMetric_SourceType", "SourceType IS NULL OR SourceType IN ('UserInput', 'SystemCalculated', 'HangfireJob', 'ExternalAPI', 'Manual', 'Import')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.AlertDefinition", b =>
                {
                    b.Property<int>("AlertId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("AlertId"));

                    b.Property<string>("AlertCode")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("AlertName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("AlertType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("AutoResolveCondition")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Channels")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("CheckFrequencyMinutes")
                        .HasColumnType("int");

                    b.Property<int>("CooldownMinutes")
                        .HasColumnType("int");

                    b.Property<int>("CreatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<string>("EscalationRules")
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit");

                    b.Property<DateTime?>("LastCheckDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime?>("LastTriggeredDate")
                        .HasColumnType("datetime2");

                    b.Property<int?>("ModifiedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("ModifiedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("Recipients")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Severity")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<int>("TemplateId")
                        .HasColumnType("int");

                    b.Property<string>("TriggerCondition")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("TriggerCount")
                        .HasColumnType("int");

                    b.HasKey("AlertId");

                    b.HasIndex("AlertCode")
                        .IsUnique()
                        .HasDatabaseName("UQ_Alert_Code");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_Alerts_Active");

                    b.HasIndex("LastCheckDate")
                        .HasDatabaseName("IX_Alerts_LastCheck")
                        .HasFilter("[IsActive] = 1");

                    b.HasIndex("ModifiedBy");

                    b.HasIndex("TemplateId");

                    b.HasIndex("AlertType", "IsActive")
                        .HasDatabaseName("IX_Alerts_Type");

                    b.ToTable("AlertDefinitions", t =>
                        {
                            t.HasCheckConstraint("CK_Alert_Severity", "[Severity] IN ('Info', 'Warning', 'Error', 'Critical')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.AlertHistory", b =>
                {
                    b.Property<long>("HistoryId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("HistoryId"));

                    b.Property<int?>("AcknowledgedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("AcknowledgedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("AcknowledgmentNotes")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<int>("AlertId")
                        .HasColumnType("int");

                    b.Property<DateTime?>("EscalatedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("EscalationDetails")
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("IsEscalated")
                        .HasColumnType("bit");

                    b.Property<long?>("NotificationId")
                        .HasColumnType("bigint");

                    b.Property<string>("ResolutionNotes")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<int?>("ResolvedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("ResolvedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("Severity")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<int?>("TimeToAcknowledgeMinutes")
                        .HasColumnType("int");

                    b.Property<int?>("TimeToResolveMinutes")
                        .HasColumnType("int");

                    b.Property<string>("TriggerDetails")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("TriggeredDate")
                        .HasColumnType("datetime2");

                    b.HasKey("HistoryId");

                    b.HasIndex("AcknowledgedBy");

                    b.HasIndex("IsEscalated")
                        .HasDatabaseName("IX_AlertHistory_Escalated")
                        .HasFilter("[IsEscalated] = 1");

                    b.HasIndex("NotificationId");

                    b.HasIndex("ResolvedBy");

                    b.HasIndex("TriggeredDate")
                        .IsDescending()
                        .HasDatabaseName("IX_AlertHistory_Date");

                    b.HasIndex("AlertId", "TriggeredDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_AlertHistory_Alert_Date");

                    b.HasIndex("Status", "TriggeredDate")
                        .HasDatabaseName("IX_AlertHistory_Status");

                    b.ToTable("AlertHistory", t =>
                        {
                            t.HasCheckConstraint("CK_AlertHistory_Status", "[Status] IN ('Triggered', 'Acknowledged', 'Resolved', 'AutoResolved', 'Cancelled')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.Notification", b =>
                {
                    b.Property<long>("NotificationId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("NotificationId"));

                    b.Property<string>("ActionButtonText")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("ActionUrl")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<string>("AdditionalData")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime?>("ExpiryDate")
                        .HasColumnType("datetime2");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit");

                    b.Property<string>("Message")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("NotificationType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("Priority")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<DateTime?>("ScheduledDate")
                        .HasColumnType("datetime2");

                    b.Property<long?>("SourceEntityId")
                        .HasColumnType("bigint");

                    b.Property<string>("SourceEntityType")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int?>("TemplateId")
                        .HasColumnType("int");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int?>("TriggeredBy")
                        .HasColumnType("int");

                    b.HasKey("NotificationId");

                    b.HasIndex("ExpiryDate")
                        .HasDatabaseName("IX_Notifications_Expiry")
                        .HasFilter("[ExpiryDate] IS NOT NULL");

                    b.HasIndex("ScheduledDate")
                        .HasDatabaseName("IX_Notifications_Scheduled")
                        .HasFilter("[ScheduledDate] IS NOT NULL AND [IsActive] = 1");

                    b.HasIndex("TemplateId");

                    b.HasIndex("TriggeredBy");

                    b.HasIndex("NotificationType", "CreatedDate")
                        .HasDatabaseName("IX_Notifications_Type_Date");

                    b.HasIndex("Priority", "CreatedDate")
                        .HasDatabaseName("IX_Notifications_Priority_Date");

                    b.HasIndex("SourceEntityType", "SourceEntityId")
                        .HasDatabaseName("IX_Notifications_Source");

                    b.ToTable("Notifications", t =>
                        {
                            t.HasCheckConstraint("CK_Notification_Priority", "[Priority] IN ('Low', 'Normal', 'High', 'Urgent')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.NotificationChannel", b =>
                {
                    b.Property<int>("ChannelId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("ChannelId"));

                    b.Property<string>("ChannelName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("ChannelType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("Configuration")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("Credentials")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("DailySendCount")
                        .HasColumnType("int");

                    b.Property<int>("DailySendLimit")
                        .HasColumnType("int");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("bit");

                    b.Property<DateTime?>("LastResetDate")
                        .HasColumnType("datetime2");

                    b.Property<int>("MaxRetries")
                        .HasColumnType("int");

                    b.Property<DateTime>("ModifiedDate")
                        .HasColumnType("datetime2");

                    b.Property<int>("Priority")
                        .HasColumnType("int");

                    b.Property<string>("Provider")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int>("RetryDelayMinutes")
                        .HasColumnType("int");

                    b.HasKey("ChannelId");

                    b.HasIndex("ChannelType")
                        .HasDatabaseName("IX_NotificationChannels_Type");

                    b.HasIndex("IsEnabled")
                        .HasDatabaseName("IX_NotificationChannels_Enabled");

                    b.HasIndex("Provider")
                        .HasDatabaseName("IX_NotificationChannels_Provider");

                    b.ToTable("NotificationChannels", t =>
                        {
                            t.HasCheckConstraint("CK_Channel_Priority", "[Priority] BETWEEN 1 AND 5");

                            t.HasCheckConstraint("CK_Channel_Type", "[ChannelType] IN ('Email', 'SMS', 'Push', 'InApp', 'Webhook')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.NotificationDelivery", b =>
                {
                    b.Property<long>("DeliveryId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("DeliveryId"));

                    b.Property<int>("ChannelId")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime?>("DeliveredDate")
                        .HasColumnType("datetime2");

                    b.Property<decimal?>("DeliveryCost")
                        .HasColumnType("decimal(10,4)");

                    b.Property<string>("ErrorMessage")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ExternalMessageId")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<DateTime>("ModifiedDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime?>("NextRetryDate")
                        .HasColumnType("datetime2");

                    b.Property<long>("NotificationId")
                        .HasColumnType("bigint");

                    b.Property<string>("ProviderResponse")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("RecipientAddress")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("RecipientUserId")
                        .HasColumnType("int");

                    b.Property<int>("RetryCount")
                        .HasColumnType("int");

                    b.Property<DateTime?>("SentDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.HasKey("DeliveryId");

                    b.HasIndex("ExternalMessageId")
                        .HasDatabaseName("IX_Delivery_ExternalId")
                        .HasFilter("[ExternalMessageId] IS NOT NULL");

                    b.HasIndex("RecipientUserId");

                    b.HasIndex("NotificationId", "ChannelId")
                        .HasDatabaseName("IX_Delivery_Notification_Channel");

                    b.HasIndex("Status", "NextRetryDate")
                        .HasDatabaseName("IX_Delivery_Retry")
                        .HasFilter("[Status] = 'Pending' AND [NextRetryDate] IS NOT NULL");

                    b.HasIndex("ChannelId", "Status", "CreatedDate")
                        .HasDatabaseName("IX_Delivery_Channel_Status");

                    b.ToTable("NotificationDelivery", t =>
                        {
                            t.HasCheckConstraint("CK_Delivery_Status", "[Status] IN ('Pending', 'Sent', 'Delivered', 'Failed', 'Bounced', 'Cancelled')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.NotificationRecipient", b =>
                {
                    b.Property<long>("RecipientId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("RecipientId"));

                    b.Property<DateTime?>("ActionedDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime?>("DismissedDate")
                        .HasColumnType("datetime2");

                    b.Property<bool>("IsActioned")
                        .HasColumnType("bit");

                    b.Property<bool>("IsDismissed")
                        .HasColumnType("bit");

                    b.Property<bool>("IsRead")
                        .HasColumnType("bit");

                    b.Property<long>("NotificationId")
                        .HasColumnType("bigint");

                    b.Property<DateTime?>("ReadDate")
                        .HasColumnType("datetime2");

                    b.Property<int>("UserId")
                        .HasColumnType("int");

                    b.HasKey("RecipientId");

                    b.HasIndex("NotificationId", "UserId")
                        .IsUnique()
                        .HasDatabaseName("UQ_NotificationRecipient");

                    b.HasIndex("UserId", "CreatedDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_Recipients_User_Date");

                    b.HasIndex("UserId", "IsRead", "CreatedDate")
                        .HasDatabaseName("IX_Recipients_User_Unread");

                    b.ToTable("NotificationRecipients");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.NotificationTemplate", b =>
                {
                    b.Property<int>("TemplateId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("TemplateId"));

                    b.Property<string>("AvailablePlaceholders")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("BodyTemplate")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Category")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int?>("CreatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("DefaultChannels")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("DefaultPriority")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit");

                    b.Property<bool>("IsSystemTemplate")
                        .HasColumnType("bit");

                    b.Property<int?>("ModifiedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("ModifiedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("PushTemplate")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("SmsTemplate")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("SubjectTemplate")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("TemplateCode")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("TemplateName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.HasKey("TemplateId");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_Templates_Active");

                    b.HasIndex("ModifiedBy");

                    b.HasIndex("TemplateCode")
                        .IsUnique()
                        .HasDatabaseName("UQ_Template_Code");

                    b.HasIndex("Category", "IsActive")
                        .HasDatabaseName("IX_Templates_Category");

                    b.ToTable("NotificationTemplates", t =>
                        {
                            t.HasCheckConstraint("CK_Template_Priority", "[DefaultPriority] IN ('Low', 'Normal', 'High', 'Urgent')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.UserNotificationPreference", b =>
                {
                    b.Property<int>("PreferenceId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("PreferenceId"));

                    b.Property<int>("ChannelId")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("CustomAddress")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("Frequency")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<bool>("IsEnabled")
                        .HasColumnType("bit");

                    b.Property<string>("MinimumPriority")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<DateTime>("ModifiedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("NotificationType")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<TimeSpan?>("QuietHoursEnd")
                        .HasColumnType("time");

                    b.Property<TimeSpan?>("QuietHoursStart")
                        .HasColumnType("time");

                    b.Property<int>("UserId")
                        .HasColumnType("int");

                    b.HasKey("PreferenceId");

                    b.HasIndex("ChannelId");

                    b.HasIndex("UserId", "IsEnabled")
                        .HasDatabaseName("IX_Preferences_User");

                    b.HasIndex("UserId", "ChannelId", "NotificationType")
                        .IsUnique()
                        .HasDatabaseName("UQ_UserPreference")
                        .HasFilter("[NotificationType] IS NOT NULL");

                    b.ToTable("UserNotificationPreferences", t =>
                        {
                            t.HasCheckConstraint("CK_Preference_Frequency", "[Frequency] IN ('Immediate', 'Hourly', 'Daily', 'Weekly', 'Never')");

                            t.HasCheckConstraint("CK_Preference_Priority", "[MinimumPriority] IN ('Low', 'Normal', 'High', 'Urgent')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.Department", b =>
                {
                    b.Property<int>("DepartmentId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("DepartmentId"));

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("DepartmentCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("DepartmentName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<int?>("ParentDepartmentId")
                        .HasColumnType("int");

                    b.Property<int>("TenantId")
                        .HasColumnType("int");

                    b.HasKey("DepartmentId");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_Department_Active");

                    b.HasIndex("ParentDepartmentId");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_Department_Tenant");

                    b.HasIndex("TenantId", "DepartmentCode")
                        .IsUnique()
                        .HasDatabaseName("UQ_Department_Tenant_Code");

                    b.ToTable("Departments", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.Region", b =>
                {
                    b.Property<int>("RegionId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("RegionId"));

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("RegionCode")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("RegionName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int>("RegionNumber")
                        .HasColumnType("int");

                    b.Property<int?>("RegionalManagerUserId")
                        .HasColumnType("int");

                    b.HasKey("RegionId");

                    b.HasIndex("RegionCode")
                        .IsUnique()
                        .HasDatabaseName("UQ_Region_Code");

                    b.HasIndex("RegionNumber")
                        .IsUnique()
                        .HasDatabaseName("UQ_Region_Number");

                    b.HasIndex("RegionalManagerUserId");

                    b.ToTable("Regions", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.Tenant", b =>
                {
                    b.Property<int>("TenantId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("TenantId"));

                    b.Property<string>("ContactEmail")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("ContactPhone")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<int?>("CreatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<int?>("ICTSupportUserId")
                        .HasColumnType("int");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<decimal?>("Latitude")
                        .HasColumnType("decimal(10, 7)");

                    b.Property<string>("Location")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<decimal?>("Longitude")
                        .HasColumnType("decimal(10, 7)");

                    b.Property<int?>("ManagerUserId")
                        .HasColumnType("int");

                    b.Property<int?>("ModifiedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<int?>("RegionId")
                        .HasColumnType("int");

                    b.Property<string>("TenantCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("TenantName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("TenantType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.HasKey("TenantId");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("ICTSupportUserId");

                    b.HasIndex("ManagerUserId");

                    b.HasIndex("ModifiedBy");

                    b.HasIndex("TenantCode")
                        .IsUnique()
                        .HasDatabaseName("IX_Tenants_Code");

                    b.HasIndex("IsActive", "TenantType")
                        .HasDatabaseName("IX_Tenants_Active");

                    b.HasIndex("RegionId", "IsActive")
                        .HasDatabaseName("IX_Tenants_Region")
                        .HasFilter("TenantType = 'Factory'");

                    b.HasIndex("TenantType", "IsActive")
                        .HasDatabaseName("IX_Tenants_Type");

                    SqlServerIndexBuilderExtensions.IncludeProperties(b.HasIndex("TenantType", "IsActive"), new[] { "TenantName" });

                    b.ToTable("Tenants", null, t =>
                        {
                            t.HasCheckConstraint("CHK_Tenant_Region", "(TenantType = 'Factory' AND RegionId IS NOT NULL) OR (TenantType IN ('HeadOffice', 'Subsidiary') AND RegionId IS NULL)");

                            t.HasCheckConstraint("CHK_Tenant_Type", "TenantType IN ('HeadOffice', 'Factory', 'Subsidiary')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.TenantGroup", b =>
                {
                    b.Property<int>("TenantGroupId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("TenantGroupId"));

                    b.Property<int>("CreatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("GroupCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("GroupName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.HasKey("TenantGroupId");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("GroupCode")
                        .IsUnique()
                        .HasDatabaseName("IX_TenantGroups_Code");

                    b.HasIndex("GroupName")
                        .IsUnique()
                        .HasDatabaseName("UQ_TenantGroup_Name");

                    b.HasIndex("IsActive")
                        .HasDatabaseName("IX_TenantGroups_Active");

                    b.ToTable("TenantGroups", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.TenantGroupMember", b =>
                {
                    b.Property<int>("GroupMemberId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("GroupMemberId"));

                    b.Property<int>("AddedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("AddedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<int>("TenantGroupId")
                        .HasColumnType("int");

                    b.Property<int>("TenantId")
                        .HasColumnType("int");

                    b.HasKey("GroupMemberId");

                    b.HasIndex("AddedBy");

                    b.HasIndex("TenantGroupId")
                        .HasDatabaseName("IX_GroupMembers_Group");

                    b.HasIndex("TenantId")
                        .HasDatabaseName("IX_GroupMembers_Tenant");

                    b.HasIndex("TenantGroupId", "TenantId")
                        .IsUnique()
                        .HasDatabaseName("UQ_GroupMember_Group_Tenant");

                    b.ToTable("TenantGroupMembers", (string)null);
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportAccessControl", b =>
                {
                    b.Property<int>("AccessId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("AccessId"));

                    b.Property<string>("AccessType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<int?>("DepartmentId")
                        .HasColumnType("int");

                    b.Property<DateTime?>("ExpiryDate")
                        .HasColumnType("datetime2");

                    b.Property<int>("GrantedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("GrantedDate")
                        .HasColumnType("datetime2");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit");

                    b.Property<string>("PermissionLevel")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<int>("ReportId")
                        .HasColumnType("int");

                    b.Property<int?>("RoleId")
                        .HasColumnType("int");

                    b.Property<int?>("UserId")
                        .HasColumnType("int");

                    b.HasKey("AccessId");

                    b.HasIndex("DepartmentId");

                    b.HasIndex("ExpiryDate")
                        .HasDatabaseName("IX_ReportAccess_Expiry")
                        .HasFilter("[ExpiryDate] IS NOT NULL");

                    b.HasIndex("GrantedBy");

                    b.HasIndex("ReportId", "IsActive")
                        .HasDatabaseName("IX_ReportAccess_Report");

                    b.HasIndex("RoleId", "IsActive")
                        .HasDatabaseName("IX_ReportAccess_Role")
                        .HasFilter("[RoleId] IS NOT NULL");

                    b.HasIndex("UserId", "IsActive")
                        .HasDatabaseName("IX_ReportAccess_User")
                        .HasFilter("[UserId] IS NOT NULL");

                    b.ToTable("ReportAccessControl", t =>
                        {
                            t.HasCheckConstraint("CK_ReportAccess_Permission", "[PermissionLevel] IN ('View', 'Run', 'Edit', 'Delete', 'Share', 'Admin')");

                            t.HasCheckConstraint("CK_ReportAccess_Target", "([AccessType] = 'User' AND [UserId] IS NOT NULL AND [RoleId] IS NULL AND [DepartmentId] IS NULL) OR\n                  ([AccessType] = 'Role' AND [RoleId] IS NOT NULL AND [UserId] IS NULL AND [DepartmentId] IS NULL) OR\n                  ([AccessType] = 'Department' AND [DepartmentId] IS NOT NULL AND [UserId] IS NULL AND [RoleId] IS NULL) OR\n                  ([AccessType] = 'Everyone' AND [UserId] IS NULL AND [RoleId] IS NULL AND [DepartmentId] IS NULL)");

                            t.HasCheckConstraint("CK_ReportAccess_Type", "[AccessType] IN ('User', 'Role', 'Department', 'Everyone')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportCache", b =>
                {
                    b.Property<long>("CacheId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("CacheId"));

                    b.Property<int?>("ColumnCount")
                        .HasColumnType("int");

                    b.Property<DateTime>("ExpiryDate")
                        .HasColumnType("datetime2");

                    b.Property<int?>("GeneratedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("GeneratedDate")
                        .HasColumnType("datetime2");

                    b.Property<int?>("GenerationTimeMs")
                        .HasColumnType("int");

                    b.Property<int>("HitCount")
                        .HasColumnType("int");

                    b.Property<DateTime?>("LastAccessDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("ParameterHash")
                        .IsRequired()
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)");

                    b.Property<string>("Parameters")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("ReportId")
                        .HasColumnType("int");

                    b.Property<string>("ResultData")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("RowCount")
                        .HasColumnType("int");

                    b.HasKey("CacheId");

                    b.HasIndex("ExpiryDate")
                        .HasDatabaseName("IX_ReportCache_Expiry");

                    b.HasIndex("GeneratedBy");

                    b.HasIndex("HitCount", "LastAccessDate")
                        .IsDescending()
                        .HasDatabaseName("IX_ReportCache_Popular");

                    b.HasIndex("ReportId", "GeneratedDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_ReportCache_Report");

                    b.HasIndex("ReportId", "ParameterHash")
                        .IsUnique()
                        .HasDatabaseName("UQ_ReportCache_Hash");

                    b.ToTable("ReportCache");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportDefinition", b =>
                {
                    b.Property<int>("ReportId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("ReportId"));

                    b.Property<string>("Category")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("ChartConfiguration")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ChartType")
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit");

                    b.Property<bool>("IsPublic")
                        .HasColumnType("bit");

                    b.Property<bool>("IsSystem")
                        .HasColumnType("bit");

                    b.Property<DateTime?>("LastRunDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("LayoutConfiguration")
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("ModifiedDate")
                        .HasColumnType("datetime2");

                    b.Property<int>("OwnerUserId")
                        .HasColumnType("int");

                    b.Property<string>("ReportCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("ReportName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("ReportType")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<int>("RunCount")
                        .HasColumnType("int");

                    b.Property<int?>("TemplateId")
                        .HasColumnType("int");

                    b.Property<int>("Version")
                        .HasColumnType("int");

                    b.HasKey("ReportId");

                    b.HasIndex("ReportCode")
                        .IsUnique()
                        .HasDatabaseName("UQ_Report_Code");

                    b.HasIndex("Category", "IsActive")
                        .HasDatabaseName("IX_ReportDef_Category");

                    b.HasIndex("IsPublic", "IsActive")
                        .HasDatabaseName("IX_ReportDef_Public")
                        .HasFilter("[IsPublic] = 1");

                    b.HasIndex("OwnerUserId", "IsActive")
                        .HasDatabaseName("IX_ReportDef_Owner");

                    b.HasIndex("RunCount", "LastRunDate")
                        .IsDescending()
                        .HasDatabaseName("IX_ReportDef_Popular");

                    b.HasIndex("TemplateId", "IsActive")
                        .HasDatabaseName("IX_ReportDef_Template");

                    b.ToTable("ReportDefinitions", t =>
                        {
                            t.HasCheckConstraint("CK_Report_ChartType", "[ChartType] IS NULL OR [ChartType] IN ('Bar', 'Line', 'Pie', 'Doughnut', 'Area', 'Column', 'Scatter', 'Bubble', 'Radar')");

                            t.HasCheckConstraint("CK_Report_Type", "[ReportType] IN ('Tabular', 'Chart', 'Pivot', 'Dashboard', 'CrossTab', 'Matrix')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportExecutionLog", b =>
                {
                    b.Property<long>("ExecutionId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bigint");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<long>("ExecutionId"));

                    b.Property<string>("ErrorMessage")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("ExecutedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("ExecutionDate")
                        .HasColumnType("datetime2");

                    b.Property<int?>("ExecutionTimeMs")
                        .HasColumnType("int");

                    b.Property<string>("ExecutionType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("Filters")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("OutputFormat")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("OutputPath")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<int?>("OutputSizeKB")
                        .HasColumnType("int");

                    b.Property<string>("Parameters")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int?>("QueryExecutionTimeMs")
                        .HasColumnType("int");

                    b.Property<int?>("RenderingTimeMs")
                        .HasColumnType("int");

                    b.Property<int>("ReportId")
                        .HasColumnType("int");

                    b.Property<int?>("RowCount")
                        .HasColumnType("int");

                    b.Property<int?>("ScheduleId")
                        .HasColumnType("int");

                    b.Property<string>("Status")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.HasKey("ExecutionId");

                    b.HasIndex("ExecutionDate")
                        .IsDescending()
                        .HasDatabaseName("IX_ReportExec_Date");

                    b.HasIndex("ExecutionTimeMs")
                        .IsDescending()
                        .HasDatabaseName("IX_ReportExec_Performance");

                    b.HasIndex("ScheduleId");

                    b.HasIndex("ExecutedBy", "ExecutionDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_ReportExec_User");

                    b.HasIndex("ReportId", "ExecutionDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_ReportExec_Report");

                    b.HasIndex("Status", "ExecutionDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_ReportExec_Failed")
                        .HasFilter("[Status] = 'Failed'");

                    b.ToTable("ReportExecutionLog", t =>
                        {
                            t.HasCheckConstraint("CK_ReportExec_Status", "[Status] IN ('Success', 'Failed', 'Timeout', 'Cancelled', 'Pending')");

                            t.HasCheckConstraint("CK_ReportExec_Type", "[ExecutionType] IN ('Manual', 'Scheduled', 'Cached', 'API')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportField", b =>
                {
                    b.Property<int>("FieldId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("FieldId"));

                    b.Property<string>("AggregationType")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<int?>("ColumnWidth")
                        .HasColumnType("int");

                    b.Property<string>("ComputationFormula")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("ConditionalFormatting")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("DisplayName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<int>("DisplayOrder")
                        .HasColumnType("int");

                    b.Property<bool>("DrillDownEnabled")
                        .HasColumnType("bit");

                    b.Property<string>("FormatString")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsVisible")
                        .HasColumnType("bit");

                    b.Property<int?>("ItemId")
                        .HasColumnType("int");

                    b.Property<int?>("MetricId")
                        .HasColumnType("int");

                    b.Property<string>("MetricScope")
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<int>("ReportId")
                        .HasColumnType("int");

                    b.Property<string>("SourceType")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<string>("SystemFieldName")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("FieldId");

                    b.HasIndex("ItemId")
                        .HasDatabaseName("IX_ReportField_Item")
                        .HasFilter("[ItemId] IS NOT NULL");

                    b.HasIndex("MetricId")
                        .HasDatabaseName("IX_ReportField_Metric")
                        .HasFilter("[MetricId] IS NOT NULL");

                    b.HasIndex("ReportId", "DisplayOrder")
                        .HasDatabaseName("IX_ReportField_Report");

                    b.ToTable("ReportFields", t =>
                        {
                            t.HasCheckConstraint("CK_ReportField_Aggregation", "[AggregationType] IS NULL OR [AggregationType] IN ('Sum', 'Avg', 'Count', 'Min', 'Max', 'CountDistinct', 'First', 'Last', 'None')");

                            t.HasCheckConstraint("CK_ReportField_Source", "[SourceType] IN ('FormItem', 'Metric', 'Computed', 'SystemField')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportFilter", b =>
                {
                    b.Property<int>("FilterId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("FilterId"));

                    b.Property<bool>("AllowUserOverride")
                        .HasColumnType("bit");

                    b.Property<string>("DefaultValue")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("DisplayOrder")
                        .HasColumnType("int");

                    b.Property<string>("FilterType")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<string>("FilterValue")
                        .HasColumnType("nvarchar(max)");

                    b.Property<bool>("IsParameterized")
                        .HasColumnType("bit");

                    b.Property<bool>("IsRequired")
                        .HasColumnType("bit");

                    b.Property<int?>("ItemId")
                        .HasColumnType("int");

                    b.Property<int?>("MetricId")
                        .HasColumnType("int");

                    b.Property<string>("Operator")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("ParameterLabel")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<int>("ReportId")
                        .HasColumnType("int");

                    b.Property<string>("SystemFieldName")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("FilterId");

                    b.HasIndex("ItemId")
                        .HasDatabaseName("IX_ReportFilter_Item")
                        .HasFilter("[ItemId] IS NOT NULL");

                    b.HasIndex("MetricId");

                    b.HasIndex("ReportId", "DisplayOrder")
                        .HasDatabaseName("IX_ReportFilter_Report");

                    b.HasIndex("ReportId", "IsParameterized")
                        .HasDatabaseName("IX_ReportFilter_Parametrized")
                        .HasFilter("[IsParameterized] = 1");

                    b.ToTable("ReportFilters", t =>
                        {
                            t.HasCheckConstraint("CK_ReportFilter_Operator", "[Operator] IN ('Equals', 'NotEquals', 'GreaterThan', 'LessThan', 'GreaterOrEqual', 'LessOrEqual', 'Between', 'In', 'NotIn', 'Contains', 'StartsWith', 'EndsWith', 'IsNull', 'IsNotNull')");

                            t.HasCheckConstraint("CK_ReportFilter_Type", "[FilterType] IN ('TenantId', 'RegionId', 'DateRange', 'Status', 'FieldValue', 'MetricValue', 'TenantType', 'Custom')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportGrouping", b =>
                {
                    b.Property<int>("GroupingId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("GroupingId"));

                    b.Property<string>("GroupByType")
                        .IsRequired()
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<int>("GroupOrder")
                        .HasColumnType("int");

                    b.Property<int?>("ItemId")
                        .HasColumnType("int");

                    b.Property<int?>("MetricId")
                        .HasColumnType("int");

                    b.Property<int>("ReportId")
                        .HasColumnType("int");

                    b.Property<bool>("ShowGrandTotal")
                        .HasColumnType("bit");

                    b.Property<bool>("ShowSubtotals")
                        .HasColumnType("bit");

                    b.Property<string>("SortDirection")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("nvarchar(10)");

                    b.Property<string>("SystemFieldName")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("GroupingId");

                    b.HasIndex("ItemId");

                    b.HasIndex("MetricId");

                    b.HasIndex("ReportId", "GroupOrder")
                        .HasDatabaseName("IX_ReportGrouping_Report");

                    b.ToTable("ReportGroupings", t =>
                        {
                            t.HasCheckConstraint("CK_ReportGrouping_Sort", "[SortDirection] IN ('ASC', 'DESC')");

                            t.HasCheckConstraint("CK_ReportGrouping_Type", "[GroupByType] IN ('Tenant', 'Region', 'Month', 'Year', 'Quarter', 'Week', 'Day', 'TenantType', 'Category', 'FieldValue', 'MetricValue')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportSchedule", b =>
                {
                    b.Property<int>("ScheduleId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("ScheduleId"));

                    b.Property<int>("CreatedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("CreatedDate")
                        .HasColumnType("datetime2");

                    b.Property<byte?>("DayOfMonth")
                        .HasColumnType("tinyint");

                    b.Property<byte?>("DayOfWeek")
                        .HasColumnType("tinyint");

                    b.Property<TimeSpan?>("ExecutionTime")
                        .HasColumnType("time");

                    b.Property<bool>("IncludeCharts")
                        .HasColumnType("bit");

                    b.Property<bool>("IsActive")
                        .HasColumnType("bit");

                    b.Property<DateTime?>("LastRunDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("LastRunError")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("LastRunStatus")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<DateTime>("ModifiedDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime?>("NextRunDate")
                        .HasColumnType("datetime2");

                    b.Property<int>("NotificationTemplateId")
                        .HasColumnType("int");

                    b.Property<string>("OutputFormat")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("PageOrientation")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("Recipients")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("ReportId")
                        .HasColumnType("int");

                    b.Property<string>("ScheduleName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("ScheduleType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("Timezone")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.HasKey("ScheduleId");

                    b.HasIndex("CreatedBy");

                    b.HasIndex("NextRunDate")
                        .HasDatabaseName("IX_ReportSchedule_NextRun")
                        .HasFilter("[IsActive] = 1");

                    b.HasIndex("NotificationTemplateId");

                    b.HasIndex("ReportId", "IsActive")
                        .HasDatabaseName("IX_ReportSchedule_Report");

                    b.HasIndex("ScheduleType", "IsActive")
                        .HasDatabaseName("IX_ReportSchedule_Type");

                    b.ToTable("ReportSchedules", t =>
                        {
                            t.HasCheckConstraint("CK_ReportSchedule_Format", "[OutputFormat] IN ('PDF', 'Excel', 'CSV', 'JSON', 'HTML')");

                            t.HasCheckConstraint("CK_ReportSchedule_Orientation", "[PageOrientation] IN ('Portrait', 'Landscape')");

                            t.HasCheckConstraint("CK_ReportSchedule_Type", "[ScheduleType] IN ('Daily', 'Weekly', 'Monthly', 'Quarterly', 'Yearly', 'OnDemand')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportSorting", b =>
                {
                    b.Property<int>("SortId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("SortId"));

                    b.Property<int?>("ItemId")
                        .HasColumnType("int");

                    b.Property<int?>("MetricId")
                        .HasColumnType("int");

                    b.Property<int>("ReportId")
                        .HasColumnType("int");

                    b.Property<string>("SortDirection")
                        .IsRequired()
                        .HasMaxLength(10)
                        .HasColumnType("nvarchar(10)");

                    b.Property<int>("SortOrder")
                        .HasColumnType("int");

                    b.Property<string>("SystemFieldName")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("SortId");

                    b.HasIndex("ItemId");

                    b.HasIndex("MetricId");

                    b.HasIndex("ReportId", "SortOrder")
                        .HasDatabaseName("IX_ReportSort_Report");

                    b.ToTable("ReportSorting", t =>
                        {
                            t.HasCheckConstraint("CK_ReportSort_Direction", "[SortDirection] IN ('ASC', 'DESC')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.SoftwareInstallationHistory", b =>
                {
                    b.Property<int>("HistoryId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("HistoryId"));

                    b.Property<DateTime>("ChangeDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("ChangeType")
                        .IsRequired()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<int>("ChangedBy")
                        .HasColumnType("int");

                    b.Property<string>("ErrorMessage")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int?>("FromVersionId")
                        .HasColumnType("int");

                    b.Property<int>("InstallationId")
                        .HasColumnType("int");

                    b.Property<string>("Notes")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("Reason")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("SuccessStatus")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int>("ToVersionId")
                        .HasColumnType("int");

                    b.HasKey("HistoryId");

                    b.HasIndex("ChangeDate")
                        .IsDescending()
                        .HasDatabaseName("IX_InstallHistory_Date");

                    b.HasIndex("ChangedBy")
                        .HasDatabaseName("IX_InstallHistory_User");

                    b.HasIndex("FromVersionId");

                    b.HasIndex("ToVersionId");

                    b.HasIndex("ChangeType", "ChangeDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_InstallHistory_Type");

                    b.HasIndex("InstallationId", "ChangeDate")
                        .IsDescending(false, true)
                        .HasDatabaseName("IX_InstallHistory_Installation");

                    b.ToTable("SoftwareInstallationHistory", t =>
                        {
                            t.HasCheckConstraint("CK_History_ChangeType", "ChangeType IN ('Install', 'Upgrade', 'Downgrade', 'Uninstall', 'Reinstall', 'Patch')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.SoftwareLicense", b =>
                {
                    b.Property<int>("LicenseId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("LicenseId"));

                    b.Property<decimal?>("Cost")
                        .HasColumnType("decimal(18,2)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("Currency")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(3)
                        .HasColumnType("nvarchar(3)")
                        .HasDefaultValue("KES");

                    b.Property<DateTime?>("ExpiryDate")
                        .HasColumnType("date");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<string>("LicenseKey")
                        .IsRequired()
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("LicenseType")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETUTCDATE()");

                    b.Property<string>("Notes")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("ProductId")
                        .HasColumnType("int");

                    b.Property<DateTime?>("PurchaseDate")
                        .HasColumnType("date");

                    b.Property<string>("PurchaseOrderNumber")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int>("QuantityPurchased")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(1);

                    b.Property<int>("QuantityUsed")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<string>("SupportContact")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("SupportEmail")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<string>("SupportPhone")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("Vendor")
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.HasKey("LicenseId");

                    b.HasIndex("ExpiryDate")
                        .HasDatabaseName("IX_Licenses_Expiry")
                        .HasFilter("IsActive = 1 AND ExpiryDate IS NOT NULL");

                    b.HasIndex("ProductId", "IsActive")
                        .HasDatabaseName("IX_Licenses_Product");

                    b.HasIndex("ProductId", "QuantityPurchased", "QuantityUsed", "IsActive")
                        .HasDatabaseName("IX_Licenses_Available");

                    b.ToTable("SoftwareLicenses", t =>
                        {
                            t.HasCheckConstraint("CK_License_Quantity", "QuantityUsed <= QuantityPurchased");

                            t.HasCheckConstraint("CK_License_Type", "LicenseType IN ('Perpetual', 'Subscription', 'Trial', 'Volume', 'Academic', 'OEM')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.SoftwareProduct", b =>
                {
                    b.Property<int>("ProductId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("ProductId"));

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("Description")
                        .HasMaxLength(1000)
                        .HasColumnType("nvarchar(1000)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<bool>("IsKTDAProduct")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<string>("LicenseModel")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("ProductCategory")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("ProductCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("ProductName")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.Property<bool>("RequiresLicense")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<string>("Vendor")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.HasKey("ProductId");

                    b.HasIndex("ProductCode")
                        .IsUnique();

                    b.HasIndex("Vendor")
                        .HasDatabaseName("IX_Products_Vendor");

                    b.HasIndex("ProductCategory", "IsActive")
                        .HasDatabaseName("IX_Products_Category");

                    b.ToTable("SoftwareProducts", t =>
                        {
                            t.HasCheckConstraint("CK_Product_LicenseModel", "LicenseModel IN ('PerUser', 'PerDevice', 'Enterprise', 'Subscription', 'OpenSource', 'Concurrent') OR LicenseModel IS NULL");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.SoftwareVersion", b =>
                {
                    b.Property<int>("VersionId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("VersionId"));

                    b.Property<string>("ChecksumSHA256")
                        .HasMaxLength(64)
                        .HasColumnType("nvarchar(64)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("DownloadUrl")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<DateTime?>("EndOfLifeDate")
                        .HasColumnType("date");

                    b.Property<long?>("FileSize")
                        .HasColumnType("bigint");

                    b.Property<bool>("IsCurrentVersion")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsSupported")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int?>("MajorVersion")
                        .HasColumnType("int");

                    b.Property<bool>("MinimumSupportedVersion")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<int?>("MinorVersion")
                        .HasColumnType("int");

                    b.Property<int?>("PatchVersion")
                        .HasColumnType("int");

                    b.Property<int>("ProductId")
                        .HasColumnType("int");

                    b.Property<DateTime?>("ReleaseDate")
                        .HasColumnType("date");

                    b.Property<string>("ReleaseNotes")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("SecurityLevel")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)")
                        .HasDefaultValue("Stable");

                    b.Property<string>("VersionNumber")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.HasKey("VersionId");

                    b.HasIndex("EndOfLifeDate")
                        .HasDatabaseName("IX_Versions_EOL")
                        .HasFilter("EndOfLifeDate IS NOT NULL");

                    b.HasIndex("ProductId", "VersionNumber")
                        .IsUnique()
                        .HasDatabaseName("UQ_ProductVersion");

                    b.HasIndex("SecurityLevel", "EndOfLifeDate")
                        .HasDatabaseName("IX_Versions_Security")
                        .HasFilter("IsSupported = 1");

                    b.HasIndex("ProductId", "MajorVersion", "MinorVersion", "PatchVersion")
                        .IsDescending(false, true, true, true)
                        .HasDatabaseName("IX_Versions_Product");

                    b.ToTable("SoftwareVersions", t =>
                        {
                            t.HasCheckConstraint("CK_Version_SecurityLevel", "SecurityLevel IN ('Critical', 'Stable', 'Vulnerable', 'Unsupported')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.TenantSoftwareInstallation", b =>
                {
                    b.Property<int>("InstallationId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("InstallationId"));

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("IPAddress")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<DateTime?>("InstallationDate")
                        .HasColumnType("date");

                    b.Property<string>("InstallationPath")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("InstallationType")
                        .HasMaxLength(30)
                        .HasColumnType("nvarchar(30)");

                    b.Property<DateTime?>("LastVerifiedDate")
                        .HasColumnType("date");

                    b.Property<int?>("LicenseId")
                        .HasColumnType("int");

                    b.Property<string>("MachineName")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<int?>("ModifiedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("Notes")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int>("ProductId")
                        .HasColumnType("int");

                    b.Property<string>("Status")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)")
                        .HasDefaultValue("Active");

                    b.Property<int>("TenantId")
                        .HasColumnType("int");

                    b.Property<int?>("VerifiedBy")
                        .HasColumnType("int");

                    b.Property<int>("VersionId")
                        .HasColumnType("int");

                    b.HasKey("InstallationId");

                    b.HasIndex("LastVerifiedDate")
                        .HasDatabaseName("IX_Installations_Verification")
                        .HasFilter("Status = 'Active'");

                    b.HasIndex("LicenseId")
                        .HasDatabaseName("IX_Installations_License")
                        .HasFilter("LicenseId IS NOT NULL");

                    b.HasIndex("ModifiedBy");

                    b.HasIndex("VerifiedBy");

                    b.HasIndex("VersionId")
                        .HasDatabaseName("IX_Installations_Version");

                    b.HasIndex("ProductId", "Status")
                        .HasDatabaseName("IX_Installations_Product");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_Installations_Tenant");

                    b.HasIndex("TenantId", "ProductId", "InstallationType", "MachineName")
                        .IsUnique()
                        .HasDatabaseName("UQ_Install_Tenant_Product_Type")
                        .HasFilter("[InstallationType] IS NOT NULL AND [MachineName] IS NOT NULL");

                    b.ToTable("TenantSoftwareInstallations", t =>
                        {
                            t.HasCheckConstraint("CK_Install_Status", "Status IN ('Active', 'Deprecated', 'NeedsUpgrade', 'EndOfLife', 'Uninstalled')");

                            t.HasCheckConstraint("CK_Install_Type", "InstallationType IN ('Server', 'Workstation', 'Cloud', 'Virtual', 'Container') OR InstallationType IS NULL");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Tickets.Ticket", b =>
                {
                    b.Property<int>("TicketId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("TicketId"));

                    b.Property<DateTime?>("AssignedDate")
                        .HasColumnType("datetime2");

                    b.Property<int?>("AssignedTo")
                        .HasColumnType("int");

                    b.Property<int>("CategoryId")
                        .HasColumnType("int");

                    b.Property<DateTime?>("ClosedDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("Description")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime?>("EscalatedDate")
                        .HasColumnType("datetime2");

                    b.Property<int?>("EscalatedTo")
                        .HasColumnType("int");

                    b.Property<string>("ExternalSystem")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("ExternalTicketId")
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("ExternalTicketUrl")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<bool>("IsExternal")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<bool>("IsSLABreached")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<DateTime?>("LastSyncDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime>("ModifiedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("Priority")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)")
                        .HasDefaultValue("Medium");

                    b.Property<int?>("RelatedHardwareId")
                        .HasColumnType("int");

                    b.Property<int?>("RelatedSoftwareId")
                        .HasColumnType("int");

                    b.Property<int>("ReportedBy")
                        .HasColumnType("int");

                    b.Property<DateTime>("ReportedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<string>("ResolutionNotes")
                        .HasColumnType("nvarchar(max)");

                    b.Property<int?>("ResolutionTime")
                        .HasColumnType("int");

                    b.Property<int?>("ResolvedBy")
                        .HasColumnType("int");

                    b.Property<DateTime?>("ResolvedDate")
                        .HasColumnType("datetime2");

                    b.Property<DateTime?>("SLADueDate")
                        .HasColumnType("datetime2");

                    b.Property<string>("Status")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)")
                        .HasDefaultValue("Open");

                    b.Property<string>("SyncError")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<string>("SyncStatus")
                        .IsRequired()
                        .ValueGeneratedOnAdd()
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)")
                        .HasDefaultValue("Synced");

                    b.Property<int>("TenantId")
                        .HasColumnType("int");

                    b.Property<string>("TicketNumber")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("Title")
                        .IsRequired()
                        .HasMaxLength(200)
                        .HasColumnType("nvarchar(200)");

                    b.HasKey("TicketId");

                    b.HasIndex("CategoryId");

                    b.HasIndex("EscalatedTo");

                    b.HasIndex("ExternalTicketId")
                        .HasDatabaseName("IX_Tickets_ExternalId")
                        .HasFilter("ExternalTicketId IS NOT NULL");

                    b.HasIndex("RelatedHardwareId")
                        .HasDatabaseName("IX_Tickets_Hardware")
                        .HasFilter("RelatedHardwareId IS NOT NULL");

                    b.HasIndex("RelatedSoftwareId")
                        .HasDatabaseName("IX_Tickets_Software")
                        .HasFilter("RelatedSoftwareId IS NOT NULL");

                    b.HasIndex("ReportedBy");

                    b.HasIndex("ResolvedBy");

                    b.HasIndex("TicketNumber")
                        .IsUnique();

                    b.HasIndex("AssignedTo", "Status")
                        .HasDatabaseName("IX_Tickets_Assigned")
                        .HasFilter("AssignedTo IS NOT NULL");

                    b.HasIndex("ExternalSystem", "ExternalTicketId")
                        .HasDatabaseName("IX_Tickets_External")
                        .HasFilter("IsExternal = 1");

                    b.HasIndex("LastSyncDate", "SyncStatus")
                        .HasDatabaseName("IX_Tickets_Sync")
                        .HasFilter("IsExternal = 1");

                    b.HasIndex("Priority", "Status")
                        .HasDatabaseName("IX_Tickets_Priority");

                    b.HasIndex("SLADueDate", "Status")
                        .HasDatabaseName("IX_Tickets_SLA")
                        .HasFilter("Status <> 'Resolved' AND Status <> 'Closed'");

                    b.HasIndex("Status", "TenantId")
                        .HasDatabaseName("IX_Tickets_Status");

                    b.HasIndex("SyncStatus", "LastSyncDate")
                        .HasDatabaseName("IX_Tickets_SyncFailed")
                        .HasFilter("SyncStatus = 'Failed'");

                    b.HasIndex("TenantId", "Status")
                        .HasDatabaseName("IX_Tickets_Tenant");

                    b.ToTable("Tickets", t =>
                        {
                            t.HasCheckConstraint("CK_Ticket_ExternalSystem", "ExternalSystem IN ('Internal', 'Jira', 'ServiceNow', 'Zendesk', 'Freshdesk', 'BMC', 'ManageEngine', 'Other') OR ExternalSystem IS NULL");

                            t.HasCheckConstraint("CK_Ticket_Priority", "Priority IN ('Low', 'Medium', 'High', 'Critical')");

                            t.HasCheckConstraint("CK_Ticket_Status", "Status IN ('Open', 'InProgress', 'Escalated', 'Resolved', 'Closed', 'Cancelled')");

                            t.HasCheckConstraint("CK_Ticket_SyncStatus", "SyncStatus IN ('Synced', 'Pending', 'Failed', 'NotApplicable')");
                        });
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Tickets.TicketCategory", b =>
                {
                    b.Property<int>("CategoryId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("CategoryId"));

                    b.Property<string>("CategoryCode")
                        .IsRequired()
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<string>("CategoryName")
                        .IsRequired()
                        .HasMaxLength(100)
                        .HasColumnType("nvarchar(100)");

                    b.Property<string>("ColorCode")
                        .HasMaxLength(20)
                        .HasColumnType("nvarchar(20)");

                    b.Property<string>("Description")
                        .HasMaxLength(500)
                        .HasColumnType("nvarchar(500)");

                    b.Property<int>("DisplayOrder")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int")
                        .HasDefaultValue(0);

                    b.Property<int?>("EscalationHours")
                        .HasColumnType("int");

                    b.Property<string>("GenericCategoryMapping")
                        .HasColumnType("nvarchar(max)");

                    b.Property<string>("IconClass")
                        .HasMaxLength(50)
                        .HasColumnType("nvarchar(50)");

                    b.Property<bool>("IsActive")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(true);

                    b.Property<int?>("ParentCategoryId")
                        .HasColumnType("int");

                    b.Property<int?>("SLAHours")
                        .HasColumnType("int");

                    b.HasKey("CategoryId");

                    b.HasIndex("CategoryCode")
                        .IsUnique();

                    b.HasIndex("ParentCategoryId")
                        .HasDatabaseName("IX_TicketCategories_Parent")
                        .HasFilter("ParentCategoryId IS NOT NULL");

                    b.HasIndex("IsActive", "DisplayOrder")
                        .HasDatabaseName("IX_TicketCategories_Active");

                    b.ToTable("TicketCategories");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Tickets.TicketComment", b =>
                {
                    b.Property<int>("CommentId")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("int");

                    SqlServerPropertyBuilderExtensions.UseIdentityColumn(b.Property<int>("CommentId"));

                    b.Property<string>("Comment")
                        .IsRequired()
                        .HasColumnType("nvarchar(max)");

                    b.Property<DateTime>("CreatedDate")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("datetime2")
                        .HasDefaultValueSql("GETDATE()");

                    b.Property<bool>("IsInternal")
                        .ValueGeneratedOnAdd()
                        .HasColumnType("bit")
                        .HasDefaultValue(false);

                    b.Property<int>("TicketId")
                        .HasColumnType("int");

                    b.Property<int>("UserId")
                        .HasColumnType("int");

                    b.HasKey("CommentId");

                    b.HasIndex("UserId");

                    b.HasIndex("TicketId", "CreatedDate")
                        .HasDatabaseName("IX_Comments_Ticket");

                    b.ToTable("TicketComments");
                });

            modelBuilder.Entity("FormItemOptionTemplateFormItemOptionTemplateCategory", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormItemOptionTemplateCategory", null)
                        .WithMany()
                        .HasForeignKey("FormItemOptionTemplateCategoryCategoryId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Forms.FormItemOptionTemplate", null)
                        .WithMany()
                        .HasForeignKey("TemplatesTemplateId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Audit.AuditLog", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Changer")
                        .WithMany()
                        .HasForeignKey("ChangedBy")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.Navigation("Changer");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Audit.UserActivityLog", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("User");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Financial.BudgetCategory", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Financial.BudgetCategory", "ParentCategory")
                        .WithMany("ChildCategories")
                        .HasForeignKey("ParentCategoryId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("ParentCategory");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Financial.TenantBudget", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Financial.BudgetCategory", "Category")
                        .WithMany("TenantBudgets")
                        .HasForeignKey("CategoryId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Category");

                    b.Navigation("Tenant");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Financial.TenantExpense", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Financial.BudgetCategory", "Category")
                        .WithMany("TenantExpenses")
                        .HasForeignKey("CategoryId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Creator")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Category");

                    b.Navigation("Creator");

                    b.Navigation("Tenant");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FieldLibrary", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Creator")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Creator");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormAnalytics", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateSubmission", "Submission")
                        .WithMany("Analytics")
                        .HasForeignKey("SubmissionId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplate", "Template")
                        .WithMany("Analytics")
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Submission");

                    b.Navigation("Template");

                    b.Navigation("User");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemCalculation", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "TargetItem")
                        .WithMany("Calculations")
                        .HasForeignKey("TargetItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("TargetItem");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemConfiguration", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "Item")
                        .WithMany("Configurations")
                        .HasForeignKey("ItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Item");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemMetricMapping", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "Item")
                        .WithMany("MetricMappings")
                        .HasForeignKey("ItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricDefinition", "Metric")
                        .WithMany("FormItemMetricMappings")
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Item");

                    b.Navigation("Metric");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemOption", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "Item")
                        .WithMany("Options")
                        .HasForeignKey("ItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Forms.FormItemOption", "ParentOption")
                        .WithMany("ChildOptions")
                        .HasForeignKey("ParentOptionId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Item");

                    b.Navigation("ParentOption");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemOptionTemplate", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Creator")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Modifier")
                        .WithMany()
                        .HasForeignKey("ModifiedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Cascade);

                    b.Navigation("Creator");

                    b.Navigation("Modifier");

                    b.Navigation("Tenant");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemOptionTemplateItem", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormItemOptionTemplate", "Template")
                        .WithMany("Items")
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Template");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemValidation", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "Item")
                        .WithMany("Validations")
                        .HasForeignKey("ItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Item");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormSectionMetricMapping", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricDefinition", "Metric")
                        .WithMany()
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateSection", "Section")
                        .WithMany()
                        .HasForeignKey("SectionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Metric");

                    b.Navigation("Section");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormSectionMetricSource", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormItemMetricMapping", "ItemMapping")
                        .WithMany()
                        .HasForeignKey("ItemMappingId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Forms.FormSectionMetricMapping", "SectionMapping")
                        .WithMany("Sources")
                        .HasForeignKey("SectionMappingId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("ItemMapping");

                    b.Navigation("SectionMapping");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplate", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Archiver")
                        .WithMany()
                        .HasForeignKey("ArchivedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Forms.FormCategory", "Category")
                        .WithMany("FormTemplates")
                        .HasForeignKey("CategoryId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Creator")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Modifier")
                        .WithMany()
                        .HasForeignKey("ModifiedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Publisher")
                        .WithMany()
                        .HasForeignKey("PublishedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Forms.WorkflowDefinition", "Workflow")
                        .WithMany("FormTemplates")
                        .HasForeignKey("WorkflowId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Archiver");

                    b.Navigation("Category");

                    b.Navigation("Creator");

                    b.Navigation("Modifier");

                    b.Navigation("Publisher");

                    b.Navigation("Workflow");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateAssignment", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "AssignedByUser")
                        .WithMany()
                        .HasForeignKey("AssignedBy")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "CancelledByUser")
                        .WithMany()
                        .HasForeignKey("CancelledBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Organizational.Department", "Department")
                        .WithMany()
                        .HasForeignKey("DepartmentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.Role", "Role")
                        .WithMany()
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplate", "Template")
                        .WithMany("Assignments")
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Organizational.TenantGroup", "TenantGroup")
                        .WithMany()
                        .HasForeignKey("TenantGroupId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.UserGroup", "UserGroup")
                        .WithMany()
                        .HasForeignKey("UserGroupId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("AssignedByUser");

                    b.Navigation("CancelledByUser");

                    b.Navigation("Department");

                    b.Navigation("Role");

                    b.Navigation("Template");

                    b.Navigation("Tenant");

                    b.Navigation("TenantGroup");

                    b.Navigation("User");

                    b.Navigation("UserGroup");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateItem", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FieldLibrary", "LibraryField")
                        .WithMany("FormTemplateItems")
                        .HasForeignKey("LibraryFieldId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateSection", "Section")
                        .WithMany("Items")
                        .HasForeignKey("SectionId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplate", "Template")
                        .WithMany("Items")
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("LibraryField");

                    b.Navigation("Section");

                    b.Navigation("Template");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateMetricMapping", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricDefinition", "Metric")
                        .WithMany()
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplate", "Template")
                        .WithMany()
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Metric");

                    b.Navigation("Template");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateMetricSource", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormSectionMetricMapping", "SectionMapping")
                        .WithMany()
                        .HasForeignKey("SectionMappingId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateMetricMapping", "TemplateMapping")
                        .WithMany("Sources")
                        .HasForeignKey("TemplateMappingId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("SectionMapping");

                    b.Navigation("TemplateMapping");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateResponse", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "Item")
                        .WithMany("Responses")
                        .HasForeignKey("ItemId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Forms.FormItemOption", "SelectedOption")
                        .WithMany()
                        .HasForeignKey("SelectedOptionId")
                        .OnDelete(DeleteBehavior.SetNull);

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateSubmission", "Submission")
                        .WithMany("Responses")
                        .HasForeignKey("SubmissionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Item");

                    b.Navigation("SelectedOption");

                    b.Navigation("Submission");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateSection", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplate", "Template")
                        .WithMany("Sections")
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Template");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateSubmission", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Modifier")
                        .WithMany()
                        .HasForeignKey("ModifiedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Reviewer")
                        .WithMany()
                        .HasForeignKey("ReviewedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Submitter")
                        .WithMany()
                        .HasForeignKey("SubmittedBy")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplate", "Template")
                        .WithMany("Submissions")
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("Modifier");

                    b.Navigation("Reviewer");

                    b.Navigation("Submitter");

                    b.Navigation("Template");

                    b.Navigation("Tenant");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateSubmissionRule", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "CreatedByUser")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "ModifiedByUser")
                        .WithMany()
                        .HasForeignKey("ModifiedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplate", "Template")
                        .WithMany("SubmissionRules")
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("CreatedByUser");

                    b.Navigation("ModifiedByUser");

                    b.Navigation("Template");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.MetricPopulationLog", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormItemMetricMapping", "Mapping")
                        .WithMany("PopulationLogs")
                        .HasForeignKey("MappingId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricDefinition", "Metric")
                        .WithMany()
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "PopulatedByUser")
                        .WithMany()
                        .HasForeignKey("PopulatedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "SourceItem")
                        .WithMany()
                        .HasForeignKey("SourceItemId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateSubmission", "Submission")
                        .WithMany("MetricPopulationLogs")
                        .HasForeignKey("SubmissionId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Mapping");

                    b.Navigation("Metric");

                    b.Navigation("PopulatedByUser");

                    b.Navigation("SourceItem");

                    b.Navigation("Submission");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.SectionRouting", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "SourceItem")
                        .WithMany("Routings")
                        .HasForeignKey("SourceItemId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateSection", "SourceSection")
                        .WithMany("SourceRoutings")
                        .HasForeignKey("SourceSectionId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateSection", "TargetSection")
                        .WithMany("TargetRoutings")
                        .HasForeignKey("TargetSectionId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("SourceItem");

                    b.Navigation("SourceSection");

                    b.Navigation("TargetSection");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.SubmissionWorkflowProgress", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.WorkflowAction", "Action")
                        .WithMany()
                        .HasForeignKey("ActionId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "AssignedToUser")
                        .WithMany()
                        .HasForeignKey("AssignedTo")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "DelegatedByUser")
                        .WithMany()
                        .HasForeignKey("DelegatedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "DelegatedToUser")
                        .WithMany()
                        .HasForeignKey("DelegatedTo")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Reviewer")
                        .WithMany()
                        .HasForeignKey("ReviewedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Forms.WorkflowStep", "Step")
                        .WithMany("ProgressRecords")
                        .HasForeignKey("StepId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateSubmission", "Submission")
                        .WithMany("WorkflowProgress")
                        .HasForeignKey("SubmissionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Action");

                    b.Navigation("AssignedToUser");

                    b.Navigation("DelegatedByUser");

                    b.Navigation("DelegatedToUser");

                    b.Navigation("Reviewer");

                    b.Navigation("Step");

                    b.Navigation("Submission");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.WorkflowDefinition", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Creator")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Creator");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.WorkflowStep", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.WorkflowAction", "Action")
                        .WithMany("WorkflowSteps")
                        .HasForeignKey("ActionId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.Role", "ApproverRole")
                        .WithMany()
                        .HasForeignKey("ApproverRoleId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "ApproverUser")
                        .WithMany()
                        .HasForeignKey("ApproverUserId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Organizational.Department", "AssigneeDepartment")
                        .WithMany()
                        .HasForeignKey("AssigneeDepartmentId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "AssigneeField")
                        .WithMany()
                        .HasForeignKey("AssigneeFieldId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.Role", "EscalationRole")
                        .WithMany()
                        .HasForeignKey("EscalationRoleId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Forms.WorkflowDefinition", "Workflow")
                        .WithMany("Steps")
                        .HasForeignKey("WorkflowId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Action");

                    b.Navigation("ApproverRole");

                    b.Navigation("ApproverUser");

                    b.Navigation("AssigneeDepartment");

                    b.Navigation("AssigneeField");

                    b.Navigation("EscalationRole");

                    b.Navigation("Workflow");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Hardware.HardwareCategory", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Hardware.HardwareCategory", "ParentCategory")
                        .WithMany("ChildCategories")
                        .HasForeignKey("ParentCategoryId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("ParentCategory");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Hardware.HardwareItem", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Hardware.HardwareCategory", "Category")
                        .WithMany("HardwareItems")
                        .HasForeignKey("CategoryId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Category");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Hardware.HardwareMaintenanceLog", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Hardware.TenantHardware", "TenantHardware")
                        .WithMany("MaintenanceLogs")
                        .HasForeignKey("TenantHardwareId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("TenantHardware");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Hardware.TenantHardware", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Hardware.HardwareItem", "HardwareItem")
                        .WithMany("TenantHardware")
                        .HasForeignKey("HardwareItemId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("HardwareItem");

                    b.Navigation("Tenant");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.MenuItem", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.Module", "Module")
                        .WithMany("MenuItems")
                        .HasForeignKey("ModuleId")
                        .OnDelete(DeleteBehavior.SetNull)
                        .HasConstraintName("FK_MenuItem_Module");

                    b.HasOne("FormReporting.Models.Entities.Identity.MenuItem", "ParentMenuItem")
                        .WithMany("ChildMenuItems")
                        .HasForeignKey("ParentMenuItemId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_MenuItem_Parent");

                    b.Navigation("Module");

                    b.Navigation("ParentMenuItem");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.Module", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.MenuSection", "MenuSection")
                        .WithMany("Modules")
                        .HasForeignKey("MenuSectionId");

                    b.Navigation("MenuSection");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.Permission", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.Module", "Module")
                        .WithMany("Permissions")
                        .HasForeignKey("ModuleId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_Permission_Module");

                    b.Navigation("Module");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.Role", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.ScopeLevel", "ScopeLevel")
                        .WithMany("Roles")
                        .HasForeignKey("ScopeLevelId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("ScopeLevel");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.RoleMenuItem", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.MenuItem", "MenuItem")
                        .WithMany("RoleMenuItems")
                        .HasForeignKey("MenuItemId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("FK_RoleMenuItem_MenuItem");

                    b.HasOne("FormReporting.Models.Entities.Identity.Role", "Role")
                        .WithMany("RoleMenuItems")
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("FK_RoleMenuItem_Role");

                    b.Navigation("MenuItem");

                    b.Navigation("Role");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.RolePermission", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Assigner")
                        .WithMany()
                        .HasForeignKey("AssignedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .HasConstraintName("FK_RolePermission_AssignedBy");

                    b.HasOne("FormReporting.Models.Entities.Identity.Permission", "Permission")
                        .WithMany("RolePermissions")
                        .HasForeignKey("PermissionId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("FK_RolePermission_Permission");

                    b.HasOne("FormReporting.Models.Entities.Identity.Role", "Role")
                        .WithMany("RolePermissions")
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("FK_RolePermission_Role");

                    b.Navigation("Assigner");

                    b.Navigation("Permission");

                    b.Navigation("Role");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.User", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Organizational.Department", "Department")
                        .WithMany("Users")
                        .HasForeignKey("DepartmentId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .HasConstraintName("FK_User_Department");

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "PrimaryTenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_User_PrimaryTenant");

                    b.Navigation("Department");

                    b.Navigation("PrimaryTenant");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.UserGroup", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Creator")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired()
                        .HasConstraintName("FK_UserGroup_Creator");

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .HasConstraintName("FK_UserGroup_Tenant");

                    b.Navigation("Creator");

                    b.Navigation("Tenant");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.UserGroupMember", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "AddedByUser")
                        .WithMany()
                        .HasForeignKey("AddedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired()
                        .HasConstraintName("FK_UserGroupMember_AddedBy");

                    b.HasOne("FormReporting.Models.Entities.Identity.UserGroup", "UserGroup")
                        .WithMany("Members")
                        .HasForeignKey("UserGroupId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("FK_UserGroupMember_Group");

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "User")
                        .WithMany("GroupMemberships")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("FK_UserGroupMember_User");

                    b.Navigation("AddedByUser");

                    b.Navigation("User");

                    b.Navigation("UserGroup");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.UserRole", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Assigner")
                        .WithMany()
                        .HasForeignKey("AssignedBy")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Identity.Role", "Role")
                        .WithMany("UserRoles")
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_UserRole_Role");

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "User")
                        .WithMany("UserRoles")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_UserRole_User");

                    b.Navigation("Assigner");

                    b.Navigation("Role");

                    b.Navigation("User");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.UserTenantAccess", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Grantor")
                        .WithMany()
                        .HasForeignKey("GrantedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired()
                        .HasConstraintName("FK_UserAccess_GrantedBy");

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired()
                        .HasConstraintName("FK_UserAccess_Tenant");

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "User")
                        .WithMany("TenantAccesses")
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired()
                        .HasConstraintName("FK_UserAccess_User");

                    b.Navigation("Grantor");

                    b.Navigation("Tenant");

                    b.Navigation("User");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Media.EntityMediaFile", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Attacher")
                        .WithMany()
                        .HasForeignKey("AttachedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Media.MediaFile", "File")
                        .WithMany("EntityMediaFiles")
                        .HasForeignKey("FileId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Attacher");

                    b.Navigation("File");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Media.FileAccessLog", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Accessor")
                        .WithMany()
                        .HasForeignKey("AccessedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Media.MediaFile", "File")
                        .WithMany("AccessLogs")
                        .HasForeignKey("FileId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Accessor");

                    b.Navigation("File");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Media.MediaFile", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Deleter")
                        .WithMany()
                        .HasForeignKey("DeletedBy")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Uploader")
                        .WithMany()
                        .HasForeignKey("UploadedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.Navigation("Deleter");

                    b.Navigation("Uploader");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Metrics.MetricDefinition", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricCategory", "Category")
                        .WithMany("MetricDefinitions")
                        .HasForeignKey("CategoryId");

                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricDefinition", "ParentMetric")
                        .WithMany("ChildMetrics")
                        .HasForeignKey("ParentMetricId");

                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricUnit", "Unit")
                        .WithMany("MetricDefinitions")
                        .HasForeignKey("UnitId");

                    b.Navigation("Category");

                    b.Navigation("ParentMetric");

                    b.Navigation("Unit");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Metrics.SystemMetricLog", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricDefinition", "MetricDefinition")
                        .WithMany("SystemMetricLogs")
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("MetricDefinition");

                    b.Navigation("Tenant");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Metrics.TenantMetric", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricDefinition", "MetricDefinition")
                        .WithMany("TenantMetrics")
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("MetricDefinition");

                    b.Navigation("Tenant");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.AlertDefinition", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Creator")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Modifier")
                        .WithMany()
                        .HasForeignKey("ModifiedBy")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Notifications.NotificationTemplate", "Template")
                        .WithMany("AlertDefinitions")
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.Navigation("Creator");

                    b.Navigation("Modifier");

                    b.Navigation("Template");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.AlertHistory", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Acknowledger")
                        .WithMany()
                        .HasForeignKey("AcknowledgedBy")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Notifications.AlertDefinition", "Alert")
                        .WithMany("AlertHistories")
                        .HasForeignKey("AlertId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Notifications.Notification", "Notification")
                        .WithMany()
                        .HasForeignKey("NotificationId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Resolver")
                        .WithMany()
                        .HasForeignKey("ResolvedBy")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.Navigation("Acknowledger");

                    b.Navigation("Alert");

                    b.Navigation("Notification");

                    b.Navigation("Resolver");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.Notification", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Notifications.NotificationTemplate", "Template")
                        .WithMany("Notifications")
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Trigger")
                        .WithMany()
                        .HasForeignKey("TriggeredBy")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.Navigation("Template");

                    b.Navigation("Trigger");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.NotificationDelivery", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Notifications.NotificationChannel", "Channel")
                        .WithMany("Deliveries")
                        .HasForeignKey("ChannelId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Notifications.Notification", "Notification")
                        .WithMany("Deliveries")
                        .HasForeignKey("NotificationId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "RecipientUser")
                        .WithMany()
                        .HasForeignKey("RecipientUserId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.Navigation("Channel");

                    b.Navigation("Notification");

                    b.Navigation("RecipientUser");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.NotificationRecipient", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Notifications.Notification", "Notification")
                        .WithMany("Recipients")
                        .HasForeignKey("NotificationId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Notification");

                    b.Navigation("User");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.NotificationTemplate", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Creator")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Modifier")
                        .WithMany()
                        .HasForeignKey("ModifiedBy")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.Navigation("Creator");

                    b.Navigation("Modifier");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.UserNotificationPreference", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Notifications.NotificationChannel", "Channel")
                        .WithMany("UserPreferences")
                        .HasForeignKey("ChannelId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Channel");

                    b.Navigation("User");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.Department", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Organizational.Department", "ParentDepartment")
                        .WithMany("ChildDepartments")
                        .HasForeignKey("ParentDepartmentId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_Department_Parent");

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany("Departments")
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired()
                        .HasConstraintName("FK_Department_Tenant");

                    b.Navigation("ParentDepartment");

                    b.Navigation("Tenant");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.Region", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "RegionalManager")
                        .WithMany()
                        .HasForeignKey("RegionalManagerUserId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.Navigation("RegionalManager");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.Tenant", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Creator")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .HasConstraintName("FK_Tenant_Creator");

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "ICTSupport")
                        .WithMany()
                        .HasForeignKey("ICTSupportUserId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Manager")
                        .WithMany()
                        .HasForeignKey("ManagerUserId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Modifier")
                        .WithMany()
                        .HasForeignKey("ModifiedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .HasConstraintName("FK_Tenant_Modifier");

                    b.HasOne("FormReporting.Models.Entities.Organizational.Region", "Region")
                        .WithMany("Tenants")
                        .HasForeignKey("RegionId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .HasConstraintName("FK_Tenant_Region");

                    b.Navigation("Creator");

                    b.Navigation("ICTSupport");

                    b.Navigation("Manager");

                    b.Navigation("Modifier");

                    b.Navigation("Region");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.TenantGroup", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Creator")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired()
                        .HasConstraintName("FK_TenantGroup_Creator");

                    b.Navigation("Creator");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.TenantGroupMember", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "AddedByUser")
                        .WithMany()
                        .HasForeignKey("AddedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired()
                        .HasConstraintName("FK_GroupMember_AddedBy");

                    b.HasOne("FormReporting.Models.Entities.Organizational.TenantGroup", "TenantGroup")
                        .WithMany("Members")
                        .HasForeignKey("TenantGroupId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("FK_GroupMember_Group");

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany("GroupMemberships")
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired()
                        .HasConstraintName("FK_GroupMember_Tenant");

                    b.Navigation("AddedByUser");

                    b.Navigation("Tenant");

                    b.Navigation("TenantGroup");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportAccessControl", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Organizational.Department", "Department")
                        .WithMany()
                        .HasForeignKey("DepartmentId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Grantor")
                        .WithMany()
                        .HasForeignKey("GrantedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Reporting.ReportDefinition", "Report")
                        .WithMany("AccessControls")
                        .HasForeignKey("ReportId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.Role", "Role")
                        .WithMany()
                        .HasForeignKey("RoleId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.Navigation("Department");

                    b.Navigation("Grantor");

                    b.Navigation("Report");

                    b.Navigation("Role");

                    b.Navigation("User");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportCache", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Generator")
                        .WithMany()
                        .HasForeignKey("GeneratedBy")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Reporting.ReportDefinition", "Report")
                        .WithMany("CacheEntries")
                        .HasForeignKey("ReportId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Generator");

                    b.Navigation("Report");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportDefinition", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Owner")
                        .WithMany()
                        .HasForeignKey("OwnerUserId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplate", "Template")
                        .WithMany()
                        .HasForeignKey("TemplateId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.Navigation("Owner");

                    b.Navigation("Template");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportExecutionLog", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Executor")
                        .WithMany()
                        .HasForeignKey("ExecutedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Reporting.ReportDefinition", "Report")
                        .WithMany("ExecutionLogs")
                        .HasForeignKey("ReportId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Reporting.ReportSchedule", "Schedule")
                        .WithMany("ExecutionLogs")
                        .HasForeignKey("ScheduleId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.Navigation("Executor");

                    b.Navigation("Report");

                    b.Navigation("Schedule");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportField", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "Item")
                        .WithMany()
                        .HasForeignKey("ItemId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricDefinition", "Metric")
                        .WithMany()
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Reporting.ReportDefinition", "Report")
                        .WithMany("Fields")
                        .HasForeignKey("ReportId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Item");

                    b.Navigation("Metric");

                    b.Navigation("Report");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportFilter", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "Item")
                        .WithMany()
                        .HasForeignKey("ItemId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricDefinition", "Metric")
                        .WithMany()
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Reporting.ReportDefinition", "Report")
                        .WithMany("Filters")
                        .HasForeignKey("ReportId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Item");

                    b.Navigation("Metric");

                    b.Navigation("Report");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportGrouping", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "Item")
                        .WithMany()
                        .HasForeignKey("ItemId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricDefinition", "Metric")
                        .WithMany()
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Reporting.ReportDefinition", "Report")
                        .WithMany("Groupings")
                        .HasForeignKey("ReportId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Item");

                    b.Navigation("Metric");

                    b.Navigation("Report");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportSchedule", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Creator")
                        .WithMany()
                        .HasForeignKey("CreatedBy")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Notifications.NotificationTemplate", "NotificationTemplate")
                        .WithMany()
                        .HasForeignKey("NotificationTemplateId")
                        .OnDelete(DeleteBehavior.NoAction)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Reporting.ReportDefinition", "Report")
                        .WithMany("Schedules")
                        .HasForeignKey("ReportId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Creator");

                    b.Navigation("NotificationTemplate");

                    b.Navigation("Report");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportSorting", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Forms.FormTemplateItem", "Item")
                        .WithMany()
                        .HasForeignKey("ItemId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Metrics.MetricDefinition", "Metric")
                        .WithMany()
                        .HasForeignKey("MetricId")
                        .OnDelete(DeleteBehavior.NoAction);

                    b.HasOne("FormReporting.Models.Entities.Reporting.ReportDefinition", "Report")
                        .WithMany("Sortings")
                        .HasForeignKey("ReportId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.Navigation("Item");

                    b.Navigation("Metric");

                    b.Navigation("Report");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.SoftwareInstallationHistory", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "ChangedByUser")
                        .WithMany()
                        .HasForeignKey("ChangedBy")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Software.SoftwareVersion", "FromVersion")
                        .WithMany("HistoryAsFromVersion")
                        .HasForeignKey("FromVersionId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Software.TenantSoftwareInstallation", "Installation")
                        .WithMany("History")
                        .HasForeignKey("InstallationId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Software.SoftwareVersion", "ToVersion")
                        .WithMany("HistoryAsToVersion")
                        .HasForeignKey("ToVersionId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("ChangedByUser");

                    b.Navigation("FromVersion");

                    b.Navigation("Installation");

                    b.Navigation("ToVersion");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.SoftwareLicense", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Software.SoftwareProduct", "Product")
                        .WithMany("Licenses")
                        .HasForeignKey("ProductId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Product");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.SoftwareVersion", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Software.SoftwareProduct", "Product")
                        .WithMany("Versions")
                        .HasForeignKey("ProductId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Product");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.TenantSoftwareInstallation", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Software.SoftwareLicense", "License")
                        .WithMany("Installations")
                        .HasForeignKey("LicenseId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Modifier")
                        .WithMany()
                        .HasForeignKey("ModifiedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Software.SoftwareProduct", "Product")
                        .WithMany("Installations")
                        .HasForeignKey("ProductId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Verifier")
                        .WithMany()
                        .HasForeignKey("VerifiedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Software.SoftwareVersion", "Version")
                        .WithMany("Installations")
                        .HasForeignKey("VersionId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("License");

                    b.Navigation("Modifier");

                    b.Navigation("Product");

                    b.Navigation("Tenant");

                    b.Navigation("Verifier");

                    b.Navigation("Version");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Tickets.Ticket", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Identity.User", "AssignedUser")
                        .WithMany()
                        .HasForeignKey("AssignedTo")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Tickets.TicketCategory", "Category")
                        .WithMany("Tickets")
                        .HasForeignKey("CategoryId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "EscalatedUser")
                        .WithMany()
                        .HasForeignKey("EscalatedTo")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Hardware.TenantHardware", "RelatedHardware")
                        .WithMany()
                        .HasForeignKey("RelatedHardwareId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Software.TenantSoftwareInstallation", "RelatedSoftware")
                        .WithMany()
                        .HasForeignKey("RelatedSoftwareId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Reporter")
                        .WithMany()
                        .HasForeignKey("ReportedBy")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "Resolver")
                        .WithMany()
                        .HasForeignKey("ResolvedBy")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.HasOne("FormReporting.Models.Entities.Organizational.Tenant", "Tenant")
                        .WithMany()
                        .HasForeignKey("TenantId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("AssignedUser");

                    b.Navigation("Category");

                    b.Navigation("EscalatedUser");

                    b.Navigation("RelatedHardware");

                    b.Navigation("RelatedSoftware");

                    b.Navigation("Reporter");

                    b.Navigation("Resolver");

                    b.Navigation("Tenant");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Tickets.TicketCategory", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Tickets.TicketCategory", "ParentCategory")
                        .WithMany("ChildCategories")
                        .HasForeignKey("ParentCategoryId")
                        .OnDelete(DeleteBehavior.Restrict);

                    b.Navigation("ParentCategory");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Tickets.TicketComment", b =>
                {
                    b.HasOne("FormReporting.Models.Entities.Tickets.Ticket", "Ticket")
                        .WithMany("Comments")
                        .HasForeignKey("TicketId")
                        .OnDelete(DeleteBehavior.Cascade)
                        .IsRequired();

                    b.HasOne("FormReporting.Models.Entities.Identity.User", "User")
                        .WithMany()
                        .HasForeignKey("UserId")
                        .OnDelete(DeleteBehavior.Restrict)
                        .IsRequired();

                    b.Navigation("Ticket");

                    b.Navigation("User");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Financial.BudgetCategory", b =>
                {
                    b.Navigation("ChildCategories");

                    b.Navigation("TenantBudgets");

                    b.Navigation("TenantExpenses");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FieldLibrary", b =>
                {
                    b.Navigation("FormTemplateItems");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormCategory", b =>
                {
                    b.Navigation("FormTemplates");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemMetricMapping", b =>
                {
                    b.Navigation("PopulationLogs");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemOption", b =>
                {
                    b.Navigation("ChildOptions");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormItemOptionTemplate", b =>
                {
                    b.Navigation("Items");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormSectionMetricMapping", b =>
                {
                    b.Navigation("Sources");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplate", b =>
                {
                    b.Navigation("Analytics");

                    b.Navigation("Assignments");

                    b.Navigation("Items");

                    b.Navigation("Sections");

                    b.Navigation("SubmissionRules");

                    b.Navigation("Submissions");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateItem", b =>
                {
                    b.Navigation("Calculations");

                    b.Navigation("Configurations");

                    b.Navigation("MetricMappings");

                    b.Navigation("Options");

                    b.Navigation("Responses");

                    b.Navigation("Routings");

                    b.Navigation("Validations");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateMetricMapping", b =>
                {
                    b.Navigation("Sources");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateSection", b =>
                {
                    b.Navigation("Items");

                    b.Navigation("SourceRoutings");

                    b.Navigation("TargetRoutings");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.FormTemplateSubmission", b =>
                {
                    b.Navigation("Analytics");

                    b.Navigation("MetricPopulationLogs");

                    b.Navigation("Responses");

                    b.Navigation("WorkflowProgress");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.WorkflowAction", b =>
                {
                    b.Navigation("WorkflowSteps");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.WorkflowDefinition", b =>
                {
                    b.Navigation("FormTemplates");

                    b.Navigation("Steps");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Forms.WorkflowStep", b =>
                {
                    b.Navigation("ProgressRecords");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Hardware.HardwareCategory", b =>
                {
                    b.Navigation("ChildCategories");

                    b.Navigation("HardwareItems");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Hardware.HardwareItem", b =>
                {
                    b.Navigation("TenantHardware");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Hardware.TenantHardware", b =>
                {
                    b.Navigation("MaintenanceLogs");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.MenuItem", b =>
                {
                    b.Navigation("ChildMenuItems");

                    b.Navigation("RoleMenuItems");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.MenuSection", b =>
                {
                    b.Navigation("Modules");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.Module", b =>
                {
                    b.Navigation("MenuItems");

                    b.Navigation("Permissions");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.Permission", b =>
                {
                    b.Navigation("RolePermissions");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.Role", b =>
                {
                    b.Navigation("RoleMenuItems");

                    b.Navigation("RolePermissions");

                    b.Navigation("UserRoles");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.ScopeLevel", b =>
                {
                    b.Navigation("Roles");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.User", b =>
                {
                    b.Navigation("GroupMemberships");

                    b.Navigation("TenantAccesses");

                    b.Navigation("UserRoles");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Identity.UserGroup", b =>
                {
                    b.Navigation("Members");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Media.MediaFile", b =>
                {
                    b.Navigation("AccessLogs");

                    b.Navigation("EntityMediaFiles");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Metrics.MetricCategory", b =>
                {
                    b.Navigation("MetricDefinitions");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Metrics.MetricDefinition", b =>
                {
                    b.Navigation("ChildMetrics");

                    b.Navigation("FormItemMetricMappings");

                    b.Navigation("SystemMetricLogs");

                    b.Navigation("TenantMetrics");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Metrics.MetricUnit", b =>
                {
                    b.Navigation("MetricDefinitions");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.AlertDefinition", b =>
                {
                    b.Navigation("AlertHistories");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.Notification", b =>
                {
                    b.Navigation("Deliveries");

                    b.Navigation("Recipients");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.NotificationChannel", b =>
                {
                    b.Navigation("Deliveries");

                    b.Navigation("UserPreferences");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Notifications.NotificationTemplate", b =>
                {
                    b.Navigation("AlertDefinitions");

                    b.Navigation("Notifications");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.Department", b =>
                {
                    b.Navigation("ChildDepartments");

                    b.Navigation("Users");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.Region", b =>
                {
                    b.Navigation("Tenants");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.Tenant", b =>
                {
                    b.Navigation("Departments");

                    b.Navigation("GroupMemberships");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Organizational.TenantGroup", b =>
                {
                    b.Navigation("Members");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportDefinition", b =>
                {
                    b.Navigation("AccessControls");

                    b.Navigation("CacheEntries");

                    b.Navigation("ExecutionLogs");

                    b.Navigation("Fields");

                    b.Navigation("Filters");

                    b.Navigation("Groupings");

                    b.Navigation("Schedules");

                    b.Navigation("Sortings");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Reporting.ReportSchedule", b =>
                {
                    b.Navigation("ExecutionLogs");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.SoftwareLicense", b =>
                {
                    b.Navigation("Installations");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.SoftwareProduct", b =>
                {
                    b.Navigation("Installations");

                    b.Navigation("Licenses");

                    b.Navigation("Versions");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.SoftwareVersion", b =>
                {
                    b.Navigation("HistoryAsFromVersion");

                    b.Navigation("HistoryAsToVersion");

                    b.Navigation("Installations");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Software.TenantSoftwareInstallation", b =>
                {
                    b.Navigation("History");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Tickets.Ticket", b =>
                {
                    b.Navigation("Comments");
                });

            modelBuilder.Entity("FormReporting.Models.Entities.Tickets.TicketCategory", b =>
                {
                    b.Navigation("ChildCategories");

                    b.Navigation("Tickets");
                });
#pragma warning restore 612, 618
        }
    }
}
