@model FormReporting.Models.ViewModels.Components.FormFieldViewModel
@using FormReporting.Models.Common

@*
    Form Field Router - Wraps each field in a card and routes to appropriate partial
    Industry-standard design: each field in its own clean card
*@

<div class="form-field-card" data-field-id="@Model.FieldId" data-field-type="@Model.FieldType">
    <div class="form-field-content">
        @switch (Model.FieldType)
        {
    // ============================================================================
    // INPUT FIELDS
    // ============================================================================
    case FormFieldType.Text:
        @await Html.PartialAsync("Components/Form/Fields/_TextField", Model)
        break;

    case FormFieldType.TextArea:
        @await Html.PartialAsync("Components/Form/Fields/_TextAreaField", Model)
        break;

    case FormFieldType.Number:
        @await Html.PartialAsync("Components/Form/Fields/_NumberField", Model)
        break;

    case FormFieldType.Decimal:
        @await Html.PartialAsync("Components/Form/Fields/_DecimalField", Model)
        break;

    // ============================================================================
    // DATE/TIME FIELDS
    // ============================================================================
    case FormFieldType.Date:
        @await Html.PartialAsync("Components/Form/Fields/_DateField", Model)
        break;

    case FormFieldType.Time:
        @await Html.PartialAsync("Components/Form/Fields/_TimeField", Model)
        break;

    case FormFieldType.DateTime:
        @await Html.PartialAsync("Components/Form/Fields/_DateTimeField", Model)
        break;

    // ============================================================================
    // SELECTION FIELDS
    // ============================================================================
    case FormFieldType.Dropdown:
        @await Html.PartialAsync("Components/Form/Fields/_DropdownField", Model)
        break;

    case FormFieldType.Radio:
        @await Html.PartialAsync("Components/Form/Fields/_RadioField", Model)
        break;

    case FormFieldType.Checkbox:
        @await Html.PartialAsync("Components/Form/Fields/_CheckboxField", Model)
        break;

    case FormFieldType.MultiSelect:
        @await Html.PartialAsync("Components/Form/Fields/_MultiSelectField", Model)
        break;

    // ============================================================================
    // MEDIA FIELDS
    // ============================================================================
    case FormFieldType.FileUpload:
        @await Html.PartialAsync("Components/Form/Fields/_FileUploadField", Model)
        break;

    case FormFieldType.Image:
        @await Html.PartialAsync("Components/Form/Fields/_ImageField", Model)
        break;

    case FormFieldType.Signature:
        @await Html.PartialAsync("Components/Form/Fields/_SignatureField", Model)
        break;

    // ============================================================================
    // RATING FIELDS
    // ============================================================================
    case FormFieldType.Rating:
        @await Html.PartialAsync("Components/Form/Fields/_RatingField", Model)
        break;

    case FormFieldType.Slider:
        @await Html.PartialAsync("Components/Form/Fields/_SliderField", Model)
        break;

    // ============================================================================
    // CONTACT FIELDS
    // ============================================================================
    case FormFieldType.Email:
        @await Html.PartialAsync("Components/Form/Fields/_EmailField", Model)
        break;

    case FormFieldType.Phone:
        @await Html.PartialAsync("Components/Form/Fields/_PhoneField", Model)
        break;

    case FormFieldType.Url:
        @await Html.PartialAsync("Components/Form/Fields/_UrlField", Model)
        break;

    // ============================================================================
    // SPECIALIZED FIELDS
    // ============================================================================
    case FormFieldType.Currency:
        @await Html.PartialAsync("Components/Form/Fields/_CurrencyField", Model)
        break;

    case FormFieldType.Percentage:
        @await Html.PartialAsync("Components/Form/Fields/_PercentageField", Model)
        break;

            // ============================================================================
            // DEFAULT (UNSUPPORTED)
            // ============================================================================
            default:
                <div class="alert alert-warning" role="alert">
                    <i class="ri-alert-line me-2"></i>
                    Unsupported field type: @Model.FieldType
                </div>
                break;
        }
    </div>
</div>

@* Form Field Card Styles *@
<style>
    /* Individual Field Card - Clean, white background */
    .form-field-card {
        background: #ffffff;
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 1.25rem 1.5rem !important;
        transition: all 0.2s ease;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
    }

    .form-field-card:hover {
        border-color: #dee2e6;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
    }

    .form-field-card:focus-within {
        border-color: var(--vz-primary);
        box-shadow: 0 0 0 3px rgba(var(--vz-primary-rgb), 0.1);
    }

    /* Field Content - Remove default margins */
    .form-field-content {
        margin: 0;
    }

    .form-field-content .mb-3 {
        margin-bottom: 0 !important;
    }

    .form-field-content .col-md-12,
    .form-field-content .col-md-6,
    .form-field-content .col-md-4,
    .form-field-content .col-md-3 {
        width: 100%;
        padding: 0;
    }

    /* Field Label Styling */
    .form-field-card .form-label {
        font-weight: 500;
        color: #344054;
        font-size: 0.9375rem;
        margin-bottom: 0.5rem;
    }

    /* Input Styling */
    .form-field-card .form-control,
    .form-field-card .form-select {
        border-radius: 6px;
        border-color: #d0d5dd;
        padding: 0.625rem 0.875rem;
        font-size: 0.9375rem;
    }

    .form-field-card .form-control:focus,
    .form-field-card .form-select:focus {
        border-color: var(--vz-primary);
        box-shadow: 0 0 0 3px rgba(var(--vz-primary-rgb), 0.1);
    }

    /* Help Text */
    .form-field-card .form-text {
        font-size: 0.8125rem;
        color: #667085;
        margin-top: 0.375rem;
    }

    /* Checkbox/Radio Group Container */
    .form-field-card .checkbox-group,
    .form-field-card .radio-group {
        margin-top: 0.75rem;
        padding-left: 0.25rem;
    }

    /* Individual Checkbox/Radio Item */
    .form-field-card .form-check {
        padding-left: 2rem;
        margin-bottom: 0.75rem;
        min-height: 1.75rem;
        display: flex;
        align-items: flex-start;
    }

    .form-field-card .form-check:last-child {
        margin-bottom: 0;
    }

    /* Checkbox/Radio Input */
    .form-field-card .form-check-input {
        width: 1.25rem;
        height: 1.25rem;
        margin-top: 0;
        margin-left: -2rem;
        flex-shrink: 0;
        cursor: pointer;
        border: 2px solid #d0d5dd;
    }

    .form-field-card .form-check-input:checked {
        background-color: var(--vz-primary);
        border-color: var(--vz-primary);
    }

    .form-field-card .form-check-input:focus {
        box-shadow: 0 0 0 3px rgba(var(--vz-primary-rgb), 0.15);
    }

    /* Radio specific - ensure circular */
    .form-field-card .form-check-input[type="radio"] {
        border-radius: 50%;
    }

    /* Checkbox/Radio Label */
    .form-field-card .form-check-label {
        font-size: 0.9375rem;
        color: #344054;
        padding-left: 0.5rem;
        cursor: pointer;
        line-height: 1.5;
    }

    /* Field Label to Options Spacing */
    .form-field-card .form-label {
        display: block;
        margin-bottom: 0.75rem;
    }

    /* Validation States */
    .form-field-card.has-error {
        border-color: #dc3545;
        background-color: #fff5f5;
    }

    .form-field-card.is-valid {
        border-color: #198754;
    }

    /* Required Field Indicator */
    .form-field-card .text-danger {
        font-weight: 600;
    }
</style>
