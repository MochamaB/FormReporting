@using FormReporting.Models.Common
@using FormReporting.Models.ViewModels.Dashboard
@model WidgetViewModel

@{
    // Different loading skeletons based on widget type
    var isStatCard = Model.Type == WidgetType.StatCard;
    var isChart = Model.Type == WidgetType.BarChart ||
                  Model.Type == WidgetType.LineChart ||
                  Model.Type == WidgetType.PieChart ||
                  Model.Type == WidgetType.DoughnutChart;
    var isTable = Model.Type == WidgetType.DataTable;
    var isGauge = Model.Type == WidgetType.Gauge || Model.Type == WidgetType.ProgressBar;
}

@if (isStatCard)
{
    <!-- StatCard Loading Skeleton -->
    <div class="card h-100">
        <div class="card-body">
            <div class="d-flex justify-content-between">
                <div class="flex-grow-1">
                    <div class="placeholder-glow">
                        <span class="placeholder col-6 bg-light"></span>
                    </div>
                    <div class="placeholder-glow mt-4">
                        <span class="placeholder col-4 placeholder-lg bg-light"></span>
                    </div>
                    <div class="placeholder-glow mt-2">
                        <span class="placeholder col-8 placeholder-sm bg-light"></span>
                    </div>
                </div>
                <div class="flex-shrink-0">
                    <div class="avatar-sm">
                        <span class="avatar-title bg-light rounded-circle placeholder-glow">
                            <span class="placeholder rounded-circle" style="width: 24px; height: 24px;"></span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else if (isChart)
{
    <!-- Chart Loading Skeleton -->
    <div class="card card-height-100">
        <div class="card-header">
            <div class="placeholder-glow">
                <span class="placeholder col-4 bg-light"></span>
            </div>
        </div>
        <div class="card-body d-flex align-items-center justify-content-center" style="min-height: 300px;">
            <div class="text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="text-muted mt-2 mb-0">Loading chart data...</p>
            </div>
        </div>
    </div>
}
else if (isTable)
{
    <!-- Table Loading Skeleton -->
    <div class="card card-height-100">
        <div class="card-header">
            <div class="placeholder-glow">
                <span class="placeholder col-3 bg-light"></span>
            </div>
        </div>
        <div class="card-body p-0">
            <div class="table-responsive">
                <table class="table table-nowrap mb-0">
                    <thead class="bg-light-subtle">
                        <tr>
                            <th><span class="placeholder col-6 bg-light placeholder-sm"></span></th>
                            <th><span class="placeholder col-6 bg-light placeholder-sm"></span></th>
                            <th><span class="placeholder col-6 bg-light placeholder-sm"></span></th>
                        </tr>
                    </thead>
                    <tbody>
                        @for (int i = 0; i < 5; i++)
                        {
                            <tr>
                                <td><span class="placeholder col-8 bg-light placeholder-sm"></span></td>
                                <td><span class="placeholder col-6 bg-light placeholder-sm"></span></td>
                                <td><span class="placeholder col-4 bg-light placeholder-sm"></span></td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
}
else if (isGauge)
{
    <!-- Gauge Loading Skeleton -->
    <div class="card card-height-100">
        <div class="card-header">
            <div class="placeholder-glow">
                <span class="placeholder col-4 bg-light"></span>
            </div>
        </div>
        <div class="card-body d-flex align-items-center justify-content-center" style="min-height: 200px;">
            <div class="text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="text-muted mt-2 mb-0">Loading...</p>
            </div>
        </div>
    </div>
}
else
{
    <!-- Default Loading Skeleton -->
    <div class="card h-100">
        <div class="card-body d-flex align-items-center justify-content-center" style="min-height: 150px;">
            <div class="text-center">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <p class="text-muted mt-2 mb-0">Loading widget...</p>
            </div>
        </div>
    </div>
}
