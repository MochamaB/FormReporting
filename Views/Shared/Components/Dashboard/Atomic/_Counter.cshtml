@model FormReporting.Models.ViewModels.Dashboard.Components.Atomic.CounterConfig

@{
    var fontWeightClass = Model.FontWeight switch
    {
        "normal" => "fw-normal",
        "medium" => "fw-medium",
        "semibold" => "fw-semibold",
        "bold" => "fw-bold",
        _ => Model.FontWeight?.StartsWith("fw-") == true ? Model.FontWeight : $"fw-{Model.FontWeight}"
    };

    var fontFamilyClass = Model.UseSecondaryFont ? "ff-secondary" : "";

    var allClasses = $"{Model.FontSize} {fontWeightClass} {fontFamilyClass} {Model.ColorClass} {Model.CssClass}".Trim();

    // Format the display value
    string formattedValue;
    if (!string.IsNullOrEmpty(Model.DisplayValue))
    {
        formattedValue = Model.DisplayValue;
    }
    else
    {
        var format = Model.UseThousandsSeparator ? "N" : "F";
        formattedValue = Model.TargetValue.ToString($"{format}{Model.DecimalPlaces}");
    }
}

<span class="@allClasses">
    @if (!string.IsNullOrEmpty(Model.Prefix))
    {
        <text>@Model.Prefix</text>
    }

    @if (Model.Animate)
    {
        <span class="counter-value"
              data-target="@Model.TargetValue"
              data-decimals="@Model.DecimalPlaces"
              data-separator="@(Model.UseThousandsSeparator ? "true" : "false")"
              data-duration="@Model.AnimationDuration">0</span>
    }
    else
    {
        <span>@formattedValue</span>
    }

    @if (!string.IsNullOrEmpty(Model.Suffix))
    {
        <text>@Model.Suffix</text>
    }
</span>
