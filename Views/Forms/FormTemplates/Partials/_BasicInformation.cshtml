@*
    Wizard Step 1: Basic Information
    Contains: Template Name, Code, Category, Version
*@

@* Hidden field to track TemplateId for updates *@
<input type="hidden" id="TemplateId" name="TemplateId" value="@(Model?.TemplateId ?? 0)" />

<div class="row">
    <div class="col-md-6">
        <div class="mb-3">
            <label for="TemplateName" class="form-label">
                Template Name <span class="text-danger">*</span>
            </label>
            <input type="text"
                   class="form-control"
                   id="TemplateName"
                   name="TemplateName"
                   value="@(Model?.TemplateName ?? "")"
                   placeholder="e.g., Monthly ICT Report"
                   required>
            <div class="invalid-feedback">Please enter a template name</div>
            <div class="form-text">Give your form template a descriptive name</div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="mb-3">
            <label for="TemplateCode" class="form-label">
                Template Code <span class="text-danger">*</span>
            </label>
            <div class="input-group">
                <input type="text"
                       class="form-control"
                       id="TemplateCode"
                       name="TemplateCode"
                       value="@(Model?.TemplateCode ?? "")"
                       placeholder="Auto-generated"
                       readonly>
                <button class="btn btn-outline-secondary" type="button" id="editCodeBtn" title="Edit template code manually">
                    <i class="ri-edit-line"></i>
                </button>
            </div>
            <div class="form-text" id="codeHelpText">Will be auto-generated from template name</div>
            <div class="invalid-feedback" id="codeFeedback" style="display: none;"></div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-6">
        <div class="mb-3">
            <label for="CategoryId" class="form-label">
                Category <span class="text-danger">*</span>
            </label>
            <select class="form-select" id="CategoryId" name="CategoryId" required>
                <option value="">Select category...</option>
                @if (ViewBag.Categories != null)
                {
                    foreach (var category in ViewBag.Categories)
                    {
                        <option value="@category.CategoryId" selected="@(Model?.CategoryId == category.CategoryId ? "selected" : null)">
                            @category.CategoryName
                        </option>
                    }
                }
            </select>
            <div class="invalid-feedback">Please select a category</div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="mb-3">
            <label for="Version" class="form-label">
                Version
            </label>
            <input type="text"
                   class="form-control"
                   id="Version"
                   name="Version"
                   value="@(Model?.Version.ToString() ?? "1")"
                   readonly>
            <div class="form-text">Version will be managed automatically</div>
        </div>
    </div>
</div>
