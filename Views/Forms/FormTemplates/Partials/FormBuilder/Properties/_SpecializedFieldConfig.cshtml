@*
    Specialized Field Configuration Panel
    Handles: Currency, Percentage field types
    Note: Email, Phone, Url use Text field config with built-in validation
*@

<!-- Currency Configuration -->
<div id="config-currency-fields" style="display: none;">
    <div class="mb-3">
        <div class="d-flex align-items-center mb-2">
            <i class="ri-money-dollar-circle-line fs-5 text-primary me-2"></i>
            <h6 class="mb-0">Currency Configuration</h6>
        </div>
        <small class="text-muted">Configure currency input format and constraints</small>
    </div>

    <div class="row g-3">
        <!-- Currency Symbol -->
        <div class="col-md-6">
            <label class="form-label">Currency</label>
            <select class="form-select" id="config-currencyCode"
                    onchange="FormBuilderConfiguration.saveCurrencyConfig(this)">
                <option value="KES" data-symbol="KSh" data-position="prefix">ðŸ‡°ðŸ‡ª KES - Kenyan Shilling</option>
                <option value="USD" data-symbol="$" data-position="prefix">ðŸ‡ºðŸ‡¸ USD - US Dollar</option>
                <option value="EUR" data-symbol="â‚¬" data-position="prefix">ðŸ‡ªðŸ‡º EUR - Euro</option>
                <option value="GBP" data-symbol="Â£" data-position="prefix">ðŸ‡¬ðŸ‡§ GBP - British Pound</option>
                <option value="TZS" data-symbol="TSh" data-position="prefix">ðŸ‡¹ðŸ‡¿ TZS - Tanzanian Shilling</option>
                <option value="UGX" data-symbol="USh" data-position="prefix">ðŸ‡ºðŸ‡¬ UGX - Ugandan Shilling</option>
                <option value="ZAR" data-symbol="R" data-position="prefix">ðŸ‡¿ðŸ‡¦ ZAR - South African Rand</option>
                <option value="NGN" data-symbol="â‚¦" data-position="prefix">ðŸ‡³ðŸ‡¬ NGN - Nigerian Naira</option>
                <option value="INR" data-symbol="â‚¹" data-position="prefix">ðŸ‡®ðŸ‡³ INR - Indian Rupee</option>
                <option value="JPY" data-symbol="Â¥" data-position="prefix">ðŸ‡¯ðŸ‡µ JPY - Japanese Yen</option>
                <option value="CNY" data-symbol="Â¥" data-position="prefix">ðŸ‡¨ðŸ‡³ CNY - Chinese Yuan</option>
                <option value="AED" data-symbol="Ø¯.Ø¥" data-position="prefix">ðŸ‡¦ðŸ‡ª AED - UAE Dirham</option>
                <option value="custom" data-symbol="" data-position="prefix">Custom...</option>
            </select>
            <small class="text-muted">Select currency type</small>
        </div>

        <!-- Custom Symbol (shown when custom is selected) -->
        <div class="col-md-6" id="config-customCurrencySymbol-group" style="display: none;">
            <label class="form-label">Custom Symbol</label>
            <input type="text" class="form-control" id="config-customCurrencySymbol" maxlength="5"
                   placeholder="e.g., Fr, â‚¿" onchange="FormBuilderConfiguration.saveConfig('currencySymbol', this.value)">
            <small class="text-muted">Enter custom currency symbol</small>
        </div>

        <!-- Symbol Position -->
        <div class="col-md-6">
            <label class="form-label">Symbol Position</label>
            <select class="form-select" id="config-currencyPosition"
                    onchange="FormBuilderConfiguration.saveConfig('currencyPosition', this.value)">
                <option value="prefix" selected>Before amount ($100)</option>
                <option value="suffix">After amount (100$)</option>
            </select>
            <small class="text-muted">Where to display symbol</small>
        </div>

        <!-- Decimal Places -->
        <div class="col-md-6">
            <label class="form-label">Decimal Places</label>
            <select class="form-select" id="config-currencyDecimals"
                    onchange="FormBuilderConfiguration.saveConfig('currencyDecimals', this.value)">
                <option value="0">0 (whole numbers)</option>
                <option value="2" selected>2 (standard)</option>
                <option value="3">3</option>
                <option value="4">4</option>
            </select>
            <small class="text-muted">Decimal precision</small>
        </div>

        <!-- Thousand Separator -->
        <div class="col-md-6">
            <label class="form-label">Thousand Separator</label>
            <select class="form-select" id="config-thousandSeparator"
                    onchange="FormBuilderConfiguration.saveConfig('thousandSeparator', this.value)">
                <option value="," selected>Comma (1,000,000)</option>
                <option value=".">Period (1.000.000)</option>
                <option value=" ">Space (1 000 000)</option>
                <option value="">None (1000000)</option>
            </select>
            <small class="text-muted">Format large numbers</small>
        </div>

        <!-- Decimal Separator -->
        <div class="col-md-6">
            <label class="form-label">Decimal Separator</label>
            <select class="form-select" id="config-decimalSeparator"
                    onchange="FormBuilderConfiguration.saveConfig('decimalSeparator', this.value)">
                <option value="." selected>Period (100.50)</option>
                <option value=",">Comma (100,50)</option>
            </select>
            <small class="text-muted">Decimal point style</small>
        </div>

        <!-- Min/Max Values -->
        <div class="col-md-6">
            <label class="form-label">Minimum Amount</label>
            <input type="number" class="form-control" id="config-currencyMin" step="any"
                   placeholder="No minimum" onchange="FormBuilderConfiguration.saveConfig('currencyMin', this.value)">
            <small class="text-muted">Lowest allowed amount</small>
        </div>

        <div class="col-md-6">
            <label class="form-label">Maximum Amount</label>
            <input type="number" class="form-control" id="config-currencyMax" step="any"
                   placeholder="No maximum" onchange="FormBuilderConfiguration.saveConfig('currencyMax', this.value)">
            <small class="text-muted">Highest allowed amount</small>
        </div>

        <!-- Options -->
        <div class="col-12">
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="config-allowNegativeCurrency"
                       onchange="FormBuilderConfiguration.saveConfig('allowNegativeCurrency', this.checked)">
                <label class="form-check-label" for="config-allowNegativeCurrency">
                    Allow Negative Amounts
                </label>
            </div>
            <small class="text-muted d-block ms-4">Enable negative values (e.g., refunds)</small>
        </div>
    </div>

    <!-- Currency Preview -->
    <div class="mt-3 p-3 border rounded bg-light">
        <label class="form-label small fw-semibold">Preview</label>
        <div id="currency-preview" class="fs-5 fw-semibold text-primary">
            KSh 1,234,567.89
        </div>
    </div>
</div>

<!-- Percentage Configuration -->
<div id="config-percentage-fields" style="display: none;">
    <div class="mb-3">
        <div class="d-flex align-items-center mb-2">
            <i class="ri-percent-line fs-5 text-primary me-2"></i>
            <h6 class="mb-0">Percentage Configuration</h6>
        </div>
        <small class="text-muted">Configure percentage input format and constraints</small>
    </div>

    <div class="row g-3">
        <!-- Min Value -->
        <div class="col-md-6">
            <label class="form-label">Minimum Value</label>
            <div class="input-group">
                <input type="number" class="form-control" id="config-percentageMin" step="any"
                       placeholder="0" onchange="FormBuilderConfiguration.saveConfig('percentageMin', this.value)">
                <span class="input-group-text">%</span>
            </div>
            <small class="text-muted">Lowest allowed percentage</small>
        </div>

        <!-- Max Value -->
        <div class="col-md-6">
            <label class="form-label">Maximum Value</label>
            <div class="input-group">
                <input type="number" class="form-control" id="config-percentageMax" step="any"
                       placeholder="100" onchange="FormBuilderConfiguration.saveConfig('percentageMax', this.value)">
                <span class="input-group-text">%</span>
            </div>
            <small class="text-muted">Highest allowed percentage</small>
        </div>

        <!-- Decimal Places -->
        <div class="col-md-6">
            <label class="form-label">Decimal Places</label>
            <select class="form-select" id="config-percentageDecimals"
                    onchange="FormBuilderConfiguration.saveConfig('percentageDecimals', this.value)">
                <option value="0">0 (whole numbers)</option>
                <option value="1">1</option>
                <option value="2" selected>2</option>
                <option value="3">3</option>
            </select>
            <small class="text-muted">Decimal precision</small>
        </div>

        <!-- Step -->
        <div class="col-md-6">
            <label class="form-label">Step / Increment</label>
            <div class="input-group">
                <input type="number" class="form-control" id="config-percentageStep" step="any"
                       placeholder="1" onchange="FormBuilderConfiguration.saveConfig('percentageStep', this.value)">
                <span class="input-group-text">%</span>
            </div>
            <small class="text-muted">Value increment</small>
        </div>

        <!-- Display Options -->
        <div class="col-12">
            <label class="form-label small fw-semibold">Display Options</label>
        </div>

        <div class="col-md-6">
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="config-showPercentSymbol" checked
                       onchange="FormBuilderConfiguration.saveConfig('showPercentSymbol', this.checked)">
                <label class="form-check-label" for="config-showPercentSymbol">
                    Show % Symbol
                </label>
            </div>
            <small class="text-muted d-block ms-4">Display percentage sign</small>
        </div>

        <div class="col-md-6">
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="config-allowOverHundred"
                       onchange="FormBuilderConfiguration.saveConfig('allowOverHundred', this.checked)">
                <label class="form-check-label" for="config-allowOverHundred">
                    Allow Over 100%
                </label>
            </div>
            <small class="text-muted d-block ms-4">Enable values above 100%</small>
        </div>

        <div class="col-md-6">
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="config-showAsSlider"
                       onchange="FormBuilderConfiguration.saveConfig('showAsSlider', this.checked)">
                <label class="form-check-label" for="config-showAsSlider">
                    Display as Slider
                </label>
            </div>
            <small class="text-muted d-block ms-4">Show slider instead of input</small>
        </div>

        <div class="col-md-6">
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="config-showProgressBar"
                       onchange="FormBuilderConfiguration.saveConfig('showProgressBar', this.checked)">
                <label class="form-check-label" for="config-showProgressBar">
                    Show Progress Bar
                </label>
            </div>
            <small class="text-muted d-block ms-4">Visual progress indicator</small>
        </div>
    </div>

    <!-- Percentage Preview -->
    <div class="mt-3 p-3 border rounded bg-light">
        <label class="form-label small fw-semibold">Preview</label>
        <div class="d-flex align-items-center gap-3">
            <span id="percentage-preview" class="fs-5 fw-semibold text-primary">75.50%</span>
            <div class="progress flex-grow-1" style="height: 10px;">
                <div class="progress-bar" role="progressbar" style="width: 75.5%"></div>
            </div>
        </div>
    </div>
</div>

<!-- Contact Fields Info (Email, Phone, Url use Text config) -->
<div id="config-contact-fields" style="display: none;">
    <div class="mb-3">
        <div class="d-flex align-items-center mb-2">
            <i class="ri-contacts-line fs-5 text-primary me-2"></i>
            <h6 class="mb-0">Contact Field Configuration</h6>
        </div>
        <small class="text-muted">Configure contact input validation</small>
    </div>

    <!-- Email-specific options -->
    <div id="config-email-options" style="display: none;">
        <div class="row g-3">
            <div class="col-12">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="config-allowMultipleEmails"
                           onchange="FormBuilderConfiguration.saveConfig('allowMultipleEmails', this.checked)">
                    <label class="form-check-label" for="config-allowMultipleEmails">
                        Allow Multiple Emails
                    </label>
                </div>
                <small class="text-muted d-block ms-4">Comma-separated email addresses</small>
            </div>

            <div class="col-12">
                <label class="form-label">Allowed Domains</label>
                <input type="text" class="form-control" id="config-allowedEmailDomains"
                       placeholder="e.g., company.com, partner.org (leave empty for any)"
                       onchange="FormBuilderConfiguration.saveConfig('allowedEmailDomains', this.value)">
                <small class="text-muted">Restrict to specific email domains</small>
            </div>

            <div class="col-12">
                <label class="form-label">Blocked Domains</label>
                <input type="text" class="form-control" id="config-blockedEmailDomains"
                       placeholder="e.g., tempmail.com, throwaway.com"
                       onchange="FormBuilderConfiguration.saveConfig('blockedEmailDomains', this.value)">
                <small class="text-muted">Block disposable email domains</small>
            </div>
        </div>
    </div>

    <!-- Phone-specific options -->
    <div id="config-phone-options" style="display: none;">
        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label">Default Country Code</label>
                <select class="form-select" id="config-defaultCountryCode"
                        onchange="FormBuilderConfiguration.saveConfig('defaultCountryCode', this.value)">
                    <option value="+254" selected>ðŸ‡°ðŸ‡ª +254 (Kenya)</option>
                    <option value="+255">ðŸ‡¹ðŸ‡¿ +255 (Tanzania)</option>
                    <option value="+256">ðŸ‡ºðŸ‡¬ +256 (Uganda)</option>
                    <option value="+27">ðŸ‡¿ðŸ‡¦ +27 (South Africa)</option>
                    <option value="+234">ðŸ‡³ðŸ‡¬ +234 (Nigeria)</option>
                    <option value="+1">ðŸ‡ºðŸ‡¸ +1 (USA/Canada)</option>
                    <option value="+44">ðŸ‡¬ðŸ‡§ +44 (UK)</option>
                    <option value="+91">ðŸ‡®ðŸ‡³ +91 (India)</option>
                    <option value="">No default</option>
                </select>
                <small class="text-muted">Pre-selected country code</small>
            </div>

            <div class="col-md-6">
                <label class="form-label">Phone Format</label>
                <select class="form-select" id="config-phoneFormat"
                        onchange="FormBuilderConfiguration.saveConfig('phoneFormat', this.value)">
                    <option value="international" selected>International (+254 712 345 678)</option>
                    <option value="national">National (0712 345 678)</option>
                    <option value="e164">E.164 (+254712345678)</option>
                </select>
                <small class="text-muted">Display format</small>
            </div>

            <div class="col-12">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="config-showCountrySelector" checked
                           onchange="FormBuilderConfiguration.saveConfig('showCountrySelector', this.checked)">
                    <label class="form-check-label" for="config-showCountrySelector">
                        Show Country Selector
                    </label>
                </div>
                <small class="text-muted d-block ms-4">Display country code dropdown</small>
            </div>

            <div class="col-12">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="config-validatePhoneFormat"
                           onchange="FormBuilderConfiguration.saveConfig('validatePhoneFormat', this.checked)">
                    <label class="form-check-label" for="config-validatePhoneFormat">
                        Validate Phone Format
                    </label>
                </div>
                <small class="text-muted d-block ms-4">Check if number is valid for selected country</small>
            </div>
        </div>
    </div>

    <!-- URL-specific options -->
    <div id="config-url-options" style="display: none;">
        <div class="row g-3">
            <div class="col-12">
                <label class="form-label">Allowed Protocols</label>
                <div class="d-flex flex-wrap gap-3">
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="config-allowHttp" checked
                               onchange="FormBuilderConfiguration.updateUrlProtocols()">
                        <label class="form-check-label" for="config-allowHttp">http://</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="config-allowHttps" checked
                               onchange="FormBuilderConfiguration.updateUrlProtocols()">
                        <label class="form-check-label" for="config-allowHttps">https://</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="config-allowFtp"
                               onchange="FormBuilderConfiguration.updateUrlProtocols()">
                        <label class="form-check-label" for="config-allowFtp">ftp://</label>
                    </div>
                </div>
                <small class="text-muted">Which URL protocols to accept</small>
            </div>

            <div class="col-12">
                <label class="form-label">Allowed Domains</label>
                <input type="text" class="form-control" id="config-allowedUrlDomains"
                       placeholder="e.g., youtube.com, vimeo.com (leave empty for any)"
                       onchange="FormBuilderConfiguration.saveConfig('allowedUrlDomains', this.value)">
                <small class="text-muted">Restrict to specific domains</small>
            </div>

            <div class="col-12">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="config-requireHttps"
                           onchange="FormBuilderConfiguration.saveConfig('requireHttps', this.checked)">
                    <label class="form-check-label" for="config-requireHttps">
                        Require HTTPS
                    </label>
                </div>
                <small class="text-muted d-block ms-4">Only accept secure URLs</small>
            </div>

            <div class="col-12">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="config-showUrlPreview"
                           onchange="FormBuilderConfiguration.saveConfig('showUrlPreview', this.checked)">
                    <label class="form-check-label" for="config-showUrlPreview">
                        Show Link Preview
                    </label>
                </div>
                <small class="text-muted d-block ms-4">Display clickable link after entry</small>
            </div>
        </div>
    </div>

    <!-- General Contact Field Tips -->
    <div class="alert alert-info mt-3 mb-0" style="font-size: 0.85rem;">
        <i class="ri-information-line me-1"></i>
        <strong>Note:</strong> Contact fields have built-in format validation. 
        Additional validation rules can be added in the Validation tab.
    </div>
</div>
